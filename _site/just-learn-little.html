<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">

<head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="applicable-device" content="pc,mobile" />
	<meta name="apple-mobile-web-app-title" content="极客玩家大白"/>
	<meta name="google" value="notranslate"/>

    <!-- simple jekyll search -->
    <script src="//cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.11/dest/simple-jekyll-search.min.js"></script>

	<!-- Favicon Icon -->
	<link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
    <link rel="shortcut icon" sizes="32x32" href="/assets/images/favicon.png">
    <link rel="apple-touch-icon" href="/assets/images/favicon.png">
	<link rel="apple-touch-icon-precomposed" href="/assets/images/favicon.png">
	<link rel="search" type="application/opensearchdescription+json" href="https://geekplayers.com/search.json" title="极客玩家大白" />

	<meta name="theme-color" content="#cc0000">
	<meta name="msapplication-TileColor" content="#cc0000">
	<meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg">

    <!-- Start Alexa Certify Javascript -->
    <script type="text/javascript">
        _atrk_opts = { atrk_acct: "K78pv1Y1Mn20Io", domain: "geekplayers.com", dynamic: true };
        (function () { var as = document.createElement('script'); as.type = 'text/javascript'; as.async = true; as.src = "https://certify-js.alexametrics.com/atrk.js"; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(as, s); })();
    </script>
    <noscript><img src="https://certify.alexametrics.com/atrk.gif?account=K78pv1Y1Mn20Io" style="display:none" height="1"
            width="1" alt="" /></noscript>
    <!-- End Alexa Certify Javascript -->

    <meta name="google-site-verification" content="GtBOHqwkUyIwJzqdPZ1VheMXW4edMcCJwjFJx5kGdWo" />
    <meta name="google-site-verification" content="41OWG5Vo9v4bjss_dr9CXfFGqd6FOE6iz-amoUsSC4U" />  <!-- Submit github.io to g. -->
    <meta name="google-site-verification" content="ITq_FdS8-Xx5YYhrXsVuWxj1QSFF0GITF53q1O0cMSQ" /> <!-- Submit github.com to g. -->
    <meta name="baidu-site-verification" content="yML3Kpovuo" />
    <meta name="baidu-site-verification" content="code-ZdUPa21nv6" /> <!-- Submit github.com to bd. -->
    <meta name="360-site-verification" content="49ed3d11f562a12a5ba68d3c6d2115b0" />
    <meta name="sogou_site_verification" content="53WDIeIDAM" /> <!-- Submit github.io to sg. -->
    <meta name="msvalidate.01" content="0FE0D36F099AFBB1CAC652EF20A2437F" />

	<title>只学一点点：我的技术学习策略_极客玩家大白</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
    <meta name="keywords" content="极客玩家大白">
    
	<meta name="description" content="只学一点点：我的技术学习策略 - 转载自xiaotie">
	<meta name="description" property="og:description" content="只学一点点：我的技术学习策略 - 转载自xiaotie" />
	<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
	
    <!-- Facebook and Twitter integration -->
    <meta property="og:title" content="只学一点点：我的技术学习策略 | 极客玩家大白"/>
    <meta property="og:image" content="https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg"/> <meta property="og:image:width" content="266"> <meta property="og:image:height" content="266">
	<meta property="og:locale" content="zh_cn">
	<meta property="og:updated_time" content="2020-10-07T22:52:20+08:00">
    <meta property="og:url" content="https://geekplayers.com/just-learn-little.html"/>
    <meta property="og:site_name" content="极客玩家大白"/>
    <meta property="og:description" content="只学一点点：我的技术学习策略 - 转载自xiaotie"/>

	<meta property="og:type" content="article">
	<meta property="article:section" content="大白技术控">
	<meta property="og:image:secure_url" content="https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg"/>
	<meta property="og:image:alt" content="极客玩家大白">
	<meta property="article:published_time" content="2011-12-09T18:21:20+08:00">
	<meta property="article:modified_time" content="2020-10-07T22:52:20+08:00">
	
	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@yanglr">
    <meta name="twitter:title" content="Bravo Yeung" />
    <meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg" />
    <meta name="twitter:url" content="https://geekplayers.com/just-learn-little.html" />
    <meta name="twitter:description" content="只学一点点：我的技术学习策略 - 转载自xiaotie" />
  
    <link rel="canonical" href="https://geekplayers.com/just-learn-little.html">
    <link rel="alternate" type="application/rss+xml" title="极客玩家大白 RSS feed" href="https://geekplayers.com/feed.xml">
    <link rel="sitemap" type="application/xml" title="极客玩家大白 Sitemap" href="https://geekplayers.com/sitemap.xml" />

	<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@graph": [
				{
					"@type": "ImageObject",
					"@id": "https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg",
					"inLanguage": "zh-CN",
					"url": "https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg",
					"width": 266,
					"height": 266,
					"caption": "只学一点点：我的技术学习策略 | 极客玩家大白"
				},
				{
					"@type": "WebPage",
					"@id": "https://geekplayers.com/just-learn-little.html",
					"url": "https://geekplayers.com/just-learn-little.html",
					"name": "只学一点点：我的技术学习策略 | 极客玩家大白",
					"isPartOf": {
						"@id": "https://geekplayers.com"
					},
					"primaryImageOfPage": {
						"@id": "https://geekplayers.com"
					},
					"datePublished": "2011-12-09T18:21:20+08:00",
					"dateModified": "2020-10-07T22:52:20+08:00",
					"description": "只学一点点：我的技术学习策略 - 转载自xiaotie",
					"inLanguage": "zh-CN",
					"potentialAction": [
						{
							"@type": "ReadAction",
							"target": [
								"https://geekplayers.com/just-learn-little.html"
							]
						}
					]
				},
				{
					"@type": "Article",
					"@id": "https://geekplayers.com/just-learn-little.html",
					"isPartOf": {
						"@id": "https://geekplayers.com/just-learn-little.html"
					},
					"author": {
						"@id": "https://geekplayers.com"
					},
					"headline": "只学一点点：我的技术学习策略 | 极客玩家大白",
					"datePublished": "2011-12-09T18:21:20+08:00",
					"dateModified": "2020-10-07T22:52:20+08:00",
					"commentCount": 30,
					"publisher": {
						"@id": "https://geekplayers.com"
					},
					"image": {
						"@id": "https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg"
					},
					"articleSection": "只学一点点：我的技术学习策略",
					"inLanguage": "zh-CN",
					"potentialAction": [
						{
							"@type": "CommentAction",
							"name": "Comment",
							"target": [
								"https://geekplayers.com/just-learn-little.html"
							]
						}
					]
				},
				{
					"@type": "Person",
					"@id": "https://geekplayers.com",
					"name": "极客玩家大白"
				},
				{
					"@context": "https://schema.org/",
					"@type": "Recipe",
					"name": "大白技术控",
					"description": "大白技术控!",
					"author": {
						"@type": "Person",
						"name": "Bravo Yeung"
					},
					"image": [
						"https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg"
					],
					"url": "https://geekplayers.com/just-learn-little.html",
					"recipeIngredient": [
						"第1步",
						"第2步",
						"第3步",
						"第4步"
					],
					"recipeInstructions": [
						{
							"@type": "HowToStep",
							"text": "第1步",
							"url": "https://geekplayers.com/just-learn-little.html#step-1"
						},
						{
							"@type": "HowToStep",
							"text": "第2步",
							"url": "https://geekplayers.com/just-learn-little.html#step-2"
						},
						{
							"@type": "HowToStep",
							"text": "第3步",
							"url": "https://geekplayers.com/just-learn-little.html#step-3"
						}
					],
					"datePublished": "2011-12-09T18:21:20+08:00",
					"@id": "https://geekplayers.com/just-learn-little.html",
					"isPartOf": {
						"@id": "https://geekplayers.com"
					},
					"mainEntityOfPage": "https://geekplayers.com"
				}
			]
		}
	</script>

    <!-- Third-Party CSS -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="//geekplayers.com/bower_components/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/bower_components/hover/css/hover-min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/bower_components/primer-markdown/dist/user-content.min.css">
    <link rel="stylesheet" href="//geekplayers.com/assets/css/syntax.css">
    <link rel="stylesheet" href="//geekplayers.com/assets/css/sidebar-post-nav.css">

    <!-- My CSS -->
    <link rel="stylesheet" href="//geekplayers.com/assets/css/common.css">

    <!-- CSS set in page -->
    
    <!-- <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/assets/css/index.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/assets/css/sidebar-popular-repo.css"> -->

    <!-- CSS set in layout -->
    
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/assets/css/sidebar-post-nav.css">
    

    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@v4.6.3/css/font-awesome.min.css">

    <script type="text/javascript" src="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

</head>


    <body>

    <script>
        (function () {
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

    <!-- baidu analyisis -->
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?87596be0014a64eee1571944c5130a8e";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-176595919-1">
    </script>
    
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-176595919-1');
    </script>
    
    <script>
        (function () {
            var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
            document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

    <header class="site-header">
    <div class="site-header-topbar">
        <div class="container">
            <div class="topbar-menu">
                
                <div class="item">
                    <a href="/news/"
                       target="_self"
                       title="SEO动态">
                        SEO动态
                    </a>
                </div>
                
                <div class="item">
                    <a href="/dwz/"
                       target="_self"
                       title="短链接">
                        短链接
                    </a>
                </div>
                
                <div class="item">
                    <a href="/python.html"
                       target="_self"
                       title="Python">
                        Python
                    </a>
                </div>
                
                <div class="item">
                    <a href="/it.html"
                       target="_self"
                       title="IT">
                        IT
                    </a>
                </div>
                
                <div class="item">
                    <a href="/zsxq.html"
                       target="_self"
                       title="星球">
                        星球
                    </a>
                </div>
                
                <div class="item">
                    <a href="/life.html"
                       target="_self"
                       title="故事">
                        故事
                    </a>
                </div>
                
                <div class="item">
                    <a href="/link.html"
                       target="_self"
                       title="友链">
                        友链
                    </a>
                </div>
                
            </div>
        </div>
    </div>
    <div class="container">
        <h2><strong><a id="site-header-brand" href="/" title="极客玩家大白">
                <span class="octicon octicon-gist-secret"></span>
                极客玩家大白
            </a></strong>
        </h2>
        <nav class="site-header-nav" role="navigation">
            
            <div class=" site-header-nav-item hvr-underline-from-center">
                <a href="/algo.html"
                   target="_self"
                   title="算法">
                    算法
                </a>
                
            </div>
            
            <div class=" site-header-nav-item hvr-underline-from-center">
                <a href="/dabenSeo.html"
                   target="_blank"
                   title="大奔SEO">
                    大奔SEO
                </a>
                
                <ul class="submenu">
                    
                    <li><a href="/dabaiSEO.html" 
                           target="_blank"
                     >大白SEO</a></li>
                    
                </ul>
                
            </div>
            
            <div class=" site-header-nav-item hvr-underline-from-center">
                <a href="/dotnet.html"
                   target="_blank"
                   title=".NET">
                    .NET
                </a>
                
                <ul class="submenu">
                    
                    <li><a href="/csharp.html" 
                           target=""
                     >C#</a></li>
                    
                    <li><a href="/wpf.html" 
                           target=""
                     >WPF</a></li>
                    
                </ul>
                
            </div>
            
            <div class=" site-header-nav-item hvr-underline-from-center">
                <a href="/k8s.html"
                   target="_self"
                   title="k8s">
                    k8s
                </a>
                
                <ul class="submenu">
                    
                    <li><a href="/k8s.html" 
                           target=""
                     >k8s</a></li>
                    
                </ul>
                
            </div>
            
            <div class=" site-header-nav-item hvr-underline-from-center">
                <a href="/archives.html"
                   target="_self"
                   title="Archives">
                    Archives
                </a>
                
            </div>
            
            <div class=" site-header-nav-item hvr-underline-from-center">
                <a href="/tools/"
                   target="_blank"
                   title="Tools">
                    Tools
                </a>
                
                <ul class="submenu">
                    
                    <li><a href="/run-liquild-online.html" 
                           target=""
                     >Run Liquid now</a></li>
                    
                    <li><a href="/run-liquild-online-pro.html" 
                           target=""
                     >Run Liquid now Pro</a></li>
                    
                </ul>
                
            </div>
            
            <div class=" site-header-nav-item hvr-underline-from-center">
                <a href="/about.html"
                   target="_self"
                   title="About">
                    About
                </a>
                
            </div>
            
        </nav>
    </div>
</header>


        <div class="content">
            <section class="jumbotron geopattern" data-pattern-id="只学一点点：我的技术学习策略">
    <div class="container">
        <div id="jumbotron-meta-info">
            <h1 style="font-size: 45px;">
                <a class="hvr-underline-from-center" style="display: initial !important;" href="/just-learn-little.html" title="只学一点点：我的技术学习策略_极客玩家大白" target="_self" rel="canonical">只学一点点：我的技术学习策略</a>
            </h1>

            <span class="meta-info">
                

                
                
                    <i class="fa fa-user" aria-hidden="true"></i> <a href='https://geekplayers.com'>Bravo Yeung</a>
                

                
                                
                
                <span class="octicon octicon-calendar"></span> <font style="color: #ddd;">2011/12/09 18:21:20</font>
                
            </span>
            
            <p style="margin-bottom: 0 !important;">
                
                
                
                
                    
                    <font style="color: #ddd;"><i class="fa fa-folder-open" aria-hidden="true"></i></font>
                    
                        <a style='background-color: #16a085 !important; padding: 2px 6px; border-radius: 4px !important;font-size: 15px;overflow: scroll;' 
                        href="/categories/技术学习">技术学习</a>
                    
                        <a style='background-color: #16a085 !important; padding: 2px 6px; border-radius: 4px !important;font-size: 15px;overflow: scroll;' 
                        href="/categories/极客玩家大白">极客玩家大白</a>
                    
                                    
                
                <!-- <p>out index:1</p>
                <p>size: 2</p> -->
                
                
                                    
                
                <!-- <p>out index:2</p>
                <p>size: 18</p> -->
                
                
                                    
                
                <!-- <p>out index:3</p>
                <p>size: 4</p> -->
                
                
                                    
                
                <!-- <p>out index:4</p>
                <p>size: 6</p> -->
                
            </p>
            <p class="meta-info"><i class="fa fa-info-circle"></i>
                <a rel="external nofollow" id='index-query' href="http://www.baidu.com/s?wd=https://geekplayers.com/just-learn-little.html" _target="_blank"
                    title="度娘怜爱" target="_blank">&nbsp;<font style='color: #0d31bc; font-size: 16px;'>百度收录</font></a>
            </p>
        </div>
    </div>
</section>

<script>

    $(document).ready(function(){
        var hostname = window.location.hostname;

        var newUrl = "";
        // alert(window.location.href);
        if(hostname.indexOf('github.io') > -1)
        {
            newUrl = 'http://www.baidu.com/s?wd=' + window.location.href.replace('geekplayers.com', 'yanglr.github.io');
            document.getElementById("index-query").setAttribute("href", newUrl);
        }  

        $('.geopattern').each(function(){
            $(this).geopattern($(this).data('pattern-id'));
        });

    });
</script>

<div class="post container" itemscope="" itemtype="http://schema.org/BlogPosting">
    <div class="markdown-body">
        <style>
    nav, section {
        display: block;
    }

    .breadcrumb {
        display: flex;
        flex-wrap: wrap;
        padding: .75rem 1rem;
        margin-bottom: 1rem;
        list-style: none;
        background-color: #f8f9fa;
        border-radius: .25rem
    }

    .breadcrumb-item {
        display: flex
    }

    .breadcrumb-item+.breadcrumb-item {
        padding-left: .5rem
    }

    .breadcrumb-item+.breadcrumb-item::before {
        display: inline-block;
        padding-right: .5rem;
        color: #6c757d;
        content: "/"
    }

    .breadcrumb-item+.breadcrumb-item:hover::before {
        text-decoration: underline
    }

    .breadcrumb-item+.breadcrumb-item:hover::before {
        text-decoration: none
    }

    .breadcrumb-item.active {
        color: #6c757d
    }

    .border-secondary {
        border-color: #6c757d !important;
    }

    .border {
        border: 1px solid #dee2e6 !important;
    }

    .breadcrumb {
        display: flex;
        flex-wrap: wrap;
        padding: .75rem 1rem;
        margin-bottom: 1rem;
        list-style: none;
        background-color: #f8f9fa;
        border-radius: .25rem;
    }

    ol, ul, dl {
        margin-top: 0;
        margin-bottom: 1.5rem !important;;
    }

    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    ol {
        display: block;
        list-style-type: decimal;
        margin-block-start: 1em;
        margin-block-end: 1em;
        margin-inline-start: 0px;
        margin-inline-end: 0px;
        padding-inline-start: 40px;
    }

    ol ol,
    ul ul,
    ol ul,
    ul ol {
        margin-bottom: 0
    }
</style>

<nav aria-label="breadcrumb">
    <div class="breadcrumbs">
        <ol class="breadcrumb border border-secondary" itemprop="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">

            
            

            <span><i class="fa fa-anchor"></i>&nbsp;当前位置:&nbsp;</span>
            


<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="breadcrumb-item">
    
    <a itemprop="item" itemtype="https://schema.org/Thing" href="/">
        
        <span itemprop="name"><i class="fa fa-home" aria-hidden="true"></i></span>
        
        <span itemprop="name">主页</span>
    </a>
    <meta itemprop="position" content="1" />
    
</li>
            &nbsp;/&nbsp;
            

            
            
            
            <a href="/categories/技术学习" itemprop="item" title="技术学习">
                <span itemprop="name">技术学习</span>
            </a>&nbsp;/&nbsp;
            
            <a href="/categories/极客玩家大白" itemprop="item" title="极客玩家大白">
                <span itemprop="name">极客玩家大白</span>
            </a>&nbsp;/&nbsp;
            
            
            
            

            
            
            
            

            
            
            
            

            
            
            
            
            
            <!-- Add post title or .md file containing folder name in the end postion of breadcrumbs -->
            
            
            

            
            


<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="breadcrumb-item active">
    
    <span itemprop="item" itemscope itemtype="https://schema.org/Thing">
        <span itemprop="name">只学一点点：我的技术学习策略</span>
    </span>
    <meta itemprop="position" content="2" />
    
</li>
            
            
        </ol>
        
    </div>
</nav>
    </div>
</div>

<article class="post container" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="row">

        
        <div class="col-md-9 markdown-body">

            <blockquote>
  <p>转载自 <a rel="nofollow noopener noreferrer" target="_blank" href="https://www.cnblogs.com/xiaotie/archive/2011/12/10/2283384.html">只学一点点：我的技术学习策略 - xiaotie</a></p>
</blockquote>

<blockquote>
  <p>by <img src="https://cdn.jsdelivr.net/gh/yanglr/images/xiaotie-touxiang.jpg" alt="极客玩家大白-xiaotie头像" title="极客玩家大白" /></p>
</blockquote>

<hr />

<p>李敖有首诗叫《只爱一点点》 ：</p>

<p>不爱那么多，
只爱一点点；
别人的爱情像海深，
我的爱情浅。
不爱那么多，
只爱一点点；
别人的爱情像天长，
我的爱情短。
不爱那么多，
只爱一点点；
别人眉来又眼去，
我只偷看你一眼。</p>

<p>一点足够。在黄易的大唐双龙传中有个说法叫《遁去的一》，也就是说任何事情在纷杂万象之中都有一个消失的一，把这个消失的一找到，就可以事半功倍。</p>

<p>在学技术中，很多人纠结于掌握与精通。掌握是能够熟练的使用该技术实现自己的目标，而精通，则是对该技术的常用及半常用的场景都熟悉，能够处理常见或非常见的问题，是广泛的掌握。</p>

<p>在宅男和腐女眼中，万事万物皆为攻受。学习务必精通，则是绝世小受，学习只求掌握，则是偏向于攻。孙子曰：善攻者动于九天之上，善守（受）者藏于九地之下。下面看看动于九天之上的学习方法。</p>

<p>作为一个上个世纪就开始写网页的程序员，你如果问我这个css怎么写，这个js怎么写，我的回答一般就是两个字：“不会”。做为一个从 .NET 1.0就开始写C#程序的程序员，如果你问常见的.net问题，50%情况下我的回答还是“不会”或者“查MSDN”。有不少人加我QQ讨论技术问题，我最多的回答是“不会”，“不知道”，“Google”。时至如今，也就会些用了理所当然就能记住的知识，其它的都不会，IDE的快捷键也记不住几个。当然，也有碰巧那个东西我懂的，这种情况极少。</p>

<p>技术是来解决问题的，不是增加心智负担的。承担进攻任务的行军不会带太多的累赘。我的开发任务中数据库、查询类的不重要，linq不用学，自从接触代码生成后，ORM的也全部都扔了，因为ORM需要学习，且可控性没有代码生成的好。自从项目主要是图形图像方面的后，asp.net等也都丢了，因为这类项目需求变动大、技术支持困难。直到后来才找到.net对我而言的遁去的一：unsafe + 指针。有了unsafe + 指针，图像程序性能大增，相比C/C++而言，生产力也得到了极大的提高——什么新东西都不用学（指针还没忘记）。</p>

<p>知识是基于过去经验的总结，而我们面对的是未来，因此，对于过往知识需要谨慎的辨识，对于他人经验需要参考性的采纳。MSDN中明白的说，不鼓励使用unsafe，而在.net图像程序中大量的使用后，才能感觉到它的爽。如果看到MSDN上不推荐用，看见别人也几乎不这么用，自己就给自己设置禁区，那我就找不到这个遁去的一。</p>

<p>下面是个更深刻的例子。今年应该是我写Flash程序的第三个年头。俺，是一个不会Flash的Flash程序员。你如果让我用Flash CS工具做一个动画，很抱歉，不会。那么看看，我会哪些？我学了哪些？我能做什么？做这些我相对于别人有哪些优势？从这个例子看看什么是进攻式学习。</p>

<p>普遍看来，Flash是一个动画工具。全球数百万Flash动画设计师。好吧，俺美工差，如果它是个动画工具，俺就不玩了。</p>

<p>在我最初看来，Flash是一个运行在绝大多数PC机上的虚拟机平台，擅长处理图形图像，可以用它来快速开发程序。这样看，就可以玩玩它。为什么？图形图像类应用是我给自己确立的方向，而Flash是一个适合的平台。</p>

<p>这样的认识还没有触及遁去的一。随着开发经验的增加，一个遁去的一开始浮现：</p>

<p>Flash是一个最简单的虚拟机，它只封装了最基本的操作（图形图像、声音、视频、XML以及现在的3D），连Button控件都没有，凡是可有可没有的都没有。
用普通的眼光看，这个虚拟机简单、弱小。换一种方式看：尺寸小，平台小，容易移植。用html5/js来写一套Flash的基本API也没多少代码。因此，Flash/AIR才这么容易的打入iOS之中，且各类平台间Flash代码保持非常好的兼容性。
Flash提供了一套简洁的API，跨各种平台。Flash以库的形式扩展（这一点与.Net很大不同），Flash CS工具里自带了一套简单、开源的UI控件库，Flex则提供了一套复杂的、全功能的UI库，这些都是Flash平台外部的（这也与.Net不同，WPF是在SDK里面的，而不是外面）。在平台外部，就拥有了很好的灵活性。
这个简单的弱小的小玩意怎么能算遁去的一呢？
算不上！
它充其量就是一个灰尘大小的卵细胞。
下面，一个微不足道的、看似毫无关联的玩意出场了：数据绑定。它就像一个小蝌蚪一样，向卵细胞游啊游，在两者接触的瞬间，一个生命诞生了！
Flash开发遁去的一就是Flash的底层API + 数据绑定。
Flash底层API很简单很少，各大平台都支持（Web，桌面，移动）。它就是中国移动全球通，什么地方都有它——我能！
光能还不行，直接用Flash底层API开发，就像用GDI+一笔笔绘制一样，麻烦的要命，直到数据绑定出现，数据绑定让基于Flash API的开发有了质的飞跃——它好我也好！</p>

<p>因此，掌握Flash只需要掌握两个东西：底层API和数据绑定，剩下的都是细枝末节的，用的时候查文档和搜索引擎就可以了。我们需要学的东西是多么的少，而我们能做的事情是多么的多！</p>

<p>首先，得学习开发语言。Flash平台的官方开发语言是actionscript3，简称as3，每当说起as3时，人们总会谈起as2，你就当as2从没出现过，了解as2一点用都没有，不闻、不问、不看。
as3和主流开发语言很类似。package 机制、类机制和java相似，继承是extends，实现接口是implements。区别：
（1）变量声明是var i:int；函数声明是：function foo(i:int):int; 不支持方法重载，支持默认参数。函数可以作为参数传递。支持闭包。
（2）Getter和Setter分别为：function get foo():int; 和function set foo(i:int):int;
（3）抛出事件：dispatchEvent;监听事件addEventListeneraddEventListener。事件支持弱引用。
（4）for each可以遍历集合；
（5）支持动态类，Object是动态类，for可以遍历Object: </p>

<div class="language-actionscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span><span class="o">:</span><span class="nx">String</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span><span class="err"> </span>
<span class="p">{</span>
<span class="p">...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>（6）[  ]里写元数据。常用的有三个：事件申明，嵌入资源和数据绑定：
数据绑定是 [Bindable]，这个在后面会详述。
嵌入资源的例子一看就明白：
[Embed(source=”assets/blackStyle/iconPlayStart36.png”)]
private var buttonForwardPlay36:Class;
事件申明用在类中，申明之后，IDE会对该类给出对应事件的智能提示，例子：
[Event(name=”inited”, type=”flash.events.Event”)] </p>

<p>as3很快就学会了，拿本语法书，扫一眼就行了。不用Flash CS工具的话，主流IDE就是Flash Builder，它是基于Eclipse开发的，用过Eclipse的拿过来就会用。</p>

<p>下面进入主题：Flash API和数据绑定。需要掌握的Flash API：
（1）绘制的API：绘制线、绘制曲线、填充/梯度填充、蒙版、混合模式（貌似除了蒙版外，Html5都有！）
（2）滤镜和变换
（3）文本处理：TextField
（4）核心UI类：Sprite、它的生命周期及对交互的响应
上面这些是我们的钢筋水泥，下面，就用这些钢筋水泥来搭建我们自己的应用。有人可能会问：控件呢？有了数据绑定，我们并不需要控件，或者换句话说，有了数据绑定，我们可以很容易由底层API搭建自己需要的控件。
数据绑定非常容易！
数据绑定是Flex的mxml（Flex描述界面的语言）编译器提供的一个功能。下面，我们只用Flex的 mxml编译器，而不用Flex的任何控件，来从Flash API搭建我们自己的控件或其它应用。Mxml就不介绍了，看一眼就会了。下面是一个mxml中数据绑定的例子：</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>    <span class="nt">&lt;shapes:Rectangle</span><span class="err"> </span><span class="na">id=</span><span class="s">"background"</span> <span class="na">width=</span><span class="s">"{width}"</span> <span class="na">height=</span><span class="s">"{height}"</span>
<span class="err">                       </span><span class="na">corner=</span><span class="s">"{bgCorner}"</span> <span class="na">corners=</span><span class="s">"{bgCorners}"</span>
<span class="err">                       </span><span class="na">color=</span><span class="s">"{bgColor}"</span>
<span class="err">                       </span><span class="na">alpha=</span><span class="s">"{bgEnabled?bgAlpha:bgAlpha*0.3}"</span>
<span class="err">                       </span><span class="na">borderColor=</span><span class="s">"{bgBorderColor}"</span>
<span class="err">                       </span><span class="na">borderThickness=</span><span class="s">"{bgBorderThickness}"</span>
<span class="err">                       </span><span class="na">fillAlpha=</span><span class="s">"{bgFillAlpha}"</span> <span class="na">borderAlpha=</span><span class="s">"{bgBorderAlpha}"</span>
<span class="err">                       </span><span class="nt">/&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>很简单、很容易理解、理解了就再也忘不了：大括号{}中的就是数据绑定内容，{}中的所有可绑定的变量构成绑定链，绑定链上的绑定源出现了任何变化，都会激发运算，将运算结果付给被绑定的字段。
如果给一个类加了元数据[Bindable]，则该类实例的字段和getter/setter就成了绑定源。如果不想把全部字段和getter/setter弄成绑定源，可对字段或setter单独增加元数据[Bindable]。
这个数据绑定比WPF/SL的数据绑定简洁多了、易用多了。</p>

<p>下面，就靠这些开始征程。
先解决多语言的问题：</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span>
<span class="err">{</span>
<span class="err">    </span><span class="nn">import</span><span class="err"> </span><span class="n">orc</span><span class="o">.</span><span class="na">common</span><span class="o">.</span><span class="na">RpcRequest</span><span class="o">;</span>

<span class="err">   </span> <span class="kd">public</span> <span class="n">dynamic</span> <span class="kd">class</span> <span class="nc">l</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">Object</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">        </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">var</span> <span class="nl">i:</span><span class="n">l</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="n">l</span><span class="o">();</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">s</span><span class="o">(</span><span class="nl">key:</span><span class="nc">String</span><span class="o">,</span><span class="err"> </span><span class="nl">defaultString:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">):</span><span class="nc">String</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">getString</span><span class="o">(</span><span class="n">key</span><span class="o">,</span><span class="n">defaultString</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="n">function</span><span class="err"> </span><span class="n">s</span><span class="o">(</span><span class="nl">key:</span><span class="nc">String</span><span class="o">,</span><span class="err"> </span><span class="nl">defaultString:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">):</span><span class="nc">String</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">i</span><span class="o">.</span><span class="na">s</span><span class="o">(</span><span class="n">key</span><span class="o">,</span><span class="n">defaultString</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">getString</span><span class="o">(</span><span class="nl">key:</span><span class="nc">String</span><span class="o">,</span><span class="err"> </span><span class="nl">defaultString:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">):</span><span class="nc">String</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">hasOwnProperty</span><span class="o">(</span><span class="n">key</span><span class="o">)==</span><span class="kc">false</span><span class="o">)</span><span class="err"> </span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">lowKey:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">key</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">();</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">hasOwnProperty</span><span class="o">(</span><span class="n">lowKey</span><span class="o">)</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                   </span> <span class="k">return</span> <span class="n">defaultString</span><span class="err"> </span><span class="o">?</span><span class="err"> </span><span class="n">defaultString</span><span class="err"> </span><span class="o">:</span><span class="err"> </span><span class="n">key</span><span class="o">;</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                   </span> <span class="k">return</span> <span class="k">this</span><span class="o">[</span><span class="n">lowKey</span><span class="o">];</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">else</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">return</span> <span class="k">this</span><span class="o">[</span><span class="n">key</span><span class="o">];</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="n">function</span><span class="err"> </span><span class="n">loadRemote</span><span class="o">(</span><span class="nl">url:</span><span class="nc">String</span><span class="o">,</span><span class="err"> </span><span class="nl">callback:</span><span class="nc">Function</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">,</span><span class="err"> </span><span class="nl">failCallback:</span><span class="nc">Function</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">new</span> <span class="nc">RpcRequest</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span>
<span class="err">                </span><span class="n">function</span><span class="o">(</span><span class="nl">obj:</span><span class="nc">Object</span><span class="o">):</span><span class="kt">void</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">loadXml</span><span class="o">(</span><span class="k">new</span> <span class="no">XML</span><span class="o">(</span><span class="n">obj</span><span class="o">));</span>
<span class="err">                   </span> <span class="k">if</span><span class="o">(</span><span class="n">callback</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span><span class="err"> </span><span class="n">callback</span><span class="o">();</span>
<span class="err">                </span><span class="o">},</span>
<span class="err">                </span><span class="n">failCallback</span>
<span class="err">            </span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="n">function</span><span class="err"> </span><span class="n">loadXml</span><span class="o">(</span><span class="nl">xml:</span><span class="no">XML</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">xml</span><span class="err"> </span><span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">lang:</span><span class="n">l</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="n">l</span><span class="o">();</span>
<span class="err">            </span>
<span class="err">           </span> <span class="c1">// 第一遍</span>
 <span class="err">          </span> <span class="k">for</span> <span class="n">each</span><span class="o">(</span><span class="kt">var</span> <span class="nl">node:</span><span class="err"> </span><span class="no">XML</span> <span class="n">in</span> <span class="n">xml</span><span class="o">.</span><span class="na">item</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">lang</span><span class="o">[</span><span class="n">node</span><span class="o">.</span><span class="nd">@key</span><span class="o">]=</span><span class="nc">String</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="nd">@value</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="c1">// 第二遍，存储小写的key</span>
 <span class="err">          </span> <span class="k">for</span> <span class="n">each</span><span class="o">(</span><span class="kt">var</span> <span class="nl">node:</span><span class="err"> </span><span class="no">XML</span> <span class="n">in</span> <span class="n">xml</span><span class="o">.</span><span class="na">item</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">lkey:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">String</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="nd">@key</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">lang</span><span class="o">.</span><span class="na">hasOwnProperty</span><span class="o">(</span><span class="n">lkey</span><span class="o">)</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">lang</span><span class="o">[</span><span class="n">lkey</span><span class="o">]</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">String</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="nd">@value</span><span class="o">);</span><span class="err"> </span>
<span class="err">                </span><span class="o">}</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">            </span><span class="n">i</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">lang</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>RpcRequest 的代码就不贴了，它的功能就是从url取回个xml文件。这个类在根命名空间中，这样不用import就能用了。名字是l，代表language，有一个静态实例i，代表instance，它设为可<strong>Bindable</strong>，方法s代表取的是string。Xml文件中存储的是键值对，这样写：
<code class="language-plaintext highlighter-rouge">&lt;Button label="{l.i.s('Yes')}" /&gt;</code>
就绑定了多语言，如果不加载任何语言文件的话，显示的是“Yes”，如果加载了的话，如果该文件中存在键“Yes”，则加载对应的值，如果不存在，则寻找是否有小写后为“yes”的键，加载对应的值，如果都不存在，则显示“Yes”。而当更改语言时，由于i发生了变化，由于数据绑定的关系，该Button的label值也马上得到了更新。
寥寥几行代码就实现了多语言解决方案。</p>

<p>接着是三个基础类：Application、BaseComponent 和 BaseContainer。Application 顾名思义，是App的入口类，提供了一些基本的功能。BaseComponent 是UI类的基类。BaseContainer 是容器类的基类。这三个类的代码如下：</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span><span class="nn">orc.common</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.DisplayObject</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Sprite</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.StageAlign</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.StageScaleMode</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.Event</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">mx.binding.utils.BindingUtils</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">mx.core.Application</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">mx.events.PropertyChangeEvent</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="o">[</span><span class="nc">DefaultProperty</span><span class="o">(</span> <span class="s">"children"</span> <span class="o">)]</span>
<span class="err">    </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"inited"</span><span class="o">,</span><span class="err"> </span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span><span class="err"> </span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">Sprite</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_width:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_height:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">fillMode:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">inited:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">var</span> <span class="n">instance</span><span class="err"> </span><span class="o">:</span><span class="err"> </span><span class="nc">Application</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="nc">Application</span><span class="o">()</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">();</span>
<span class="err">            </span><span class="n">x</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">            </span><span class="n">y</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">            </span><span class="n">instance</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">;</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">stage</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">stage</span><span class="o">.</span><span class="na">showDefaultContextMenu</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">                </span><span class="n">stage</span><span class="o">.</span><span class="na">align</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">StageAlign</span><span class="o">.</span><span class="na">TOP_LEFT</span><span class="o">;</span>
<span class="err">                </span><span class="n">stage</span><span class="o">.</span><span class="na">scaleMode</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">StageScaleMode</span><span class="o">.</span><span class="na">NO_SCALE</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span><span class="n">addEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_children:</span><span class="nc">Vector</span><span class="o">.&lt;</span><span class="nc">DisplayObject</span><span class="o">&gt;;</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">childrenChanged:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">children</span><span class="o">():</span><span class="nc">Vector</span><span class="o">.&lt;</span><span class="nc">DisplayObject</span><span class="o">&gt;</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_children</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">children</span><span class="o">(</span><span class="err"> </span><span class="nl">value:</span><span class="nc">Vector</span><span class="o">.&lt;</span><span class="nc">DisplayObject</span><span class="o">&gt;</span><span class="err"> </span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span> <span class="o">(</span><span class="err"> </span><span class="n">_children</span><span class="err"> </span><span class="o">!=</span><span class="err"> </span><span class="n">value</span><span class="err"> </span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">_children</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">                </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">                </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">invalidate</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">removeEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">);</span>
<span class="err">            </span><span class="n">addEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">onStageResize</span><span class="o">(</span><span class="nl">event:</span><span class="nc">Event</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">fillMode</span><span class="err"> </span><span class="o">==</span> <span class="kc">true</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">!=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageWidth</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageWidth</span><span class="o">;</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">!=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageHeight</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageHeight</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">(</span><span class="nl">event:</span><span class="nc">Event</span><span class="o">)</span><span class="err"> </span><span class="o">:</span> <span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">fillMode</span><span class="err"> </span><span class="o">==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageWidth</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">!=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageWidth</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageWidth</span><span class="o">;</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">!=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageHeight</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">stage</span><span class="o">.</span><span class="na">stageHeight</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">stage</span><span class="o">.</span><span class="na">hasEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">)</span><span class="err"> </span><span class="o">==</span> <span class="kc">true</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">stage</span><span class="o">.</span><span class="na">removeEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">,</span><span class="err"> </span><span class="n">onStageResize</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">            </span><span class="n">stage</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">,</span><span class="err"> </span><span class="n">onStageResize</span><span class="o">);</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span> <span class="o">(</span><span class="err"> </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">while</span> <span class="o">(</span><span class="err"> </span><span class="n">numChildren</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span> <span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">removeChildAt</span><span class="o">(</span> <span class="mi">0</span> <span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span>
<span class="err">               </span> <span class="k">for</span> <span class="n">each</span><span class="err"> </span><span class="o">(</span> <span class="kt">var</span> <span class="nl">child:</span><span class="nc">DisplayObject</span> <span class="n">in</span> <span class="n">children</span><span class="err"> </span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">addChild</span><span class="o">(</span><span class="err"> </span><span class="n">child</span><span class="err"> </span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span>
<span class="err">                </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">            </span><span class="n">removeEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">);</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">inited</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">inited</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="s">"inited"</span><span class="o">));</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">width</span><span class="o">(</span><span class="nl">w:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">w</span><span class="o">;</span>
<span class="err">            </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">            </span><span class="n">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">width</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_width</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">height</span><span class="o">(</span><span class="nl">h:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">h</span><span class="o">;</span>
<span class="err">            </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">            </span><span class="n">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">height</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_height</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">x</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">.</span><span class="na">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">y</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">.</span><span class="na">y</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">removeAllChildren</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">while</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">numChildren</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">removeChildAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_children</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">_children</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">                </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>


<span class="kn">package</span><span class="err"> </span><span class="nn">orc.common</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.DisplayObjectContainer</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Sprite</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Stage</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.StageAlign</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.StageScaleMode</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.Event</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.MouseEvent</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.filters.DropShadowFilter</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.containers.PopUpCanvas</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.utils.CallLaterHelper</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.utils.MouseHelper</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"resize"</span><span class="o">,</span><span class="err"> </span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span><span class="err"> </span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mouseStick"</span><span class="o">,</span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"closed"</span><span class="o">,</span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"draw"</span><span class="o">,</span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseComponent</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">Sprite</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_width:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_height:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_tag:</span><span class="kt">int</span> <span class="o">=</span><span class="err"> </span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_enabled:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nl">DRAW:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="s">"draw"</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">maskCanvas:</span><span class="nc">PopUpCanvas</span><span class="o">;</span>


<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_mouseHelper:</span><span class="nc">MouseHelper</span><span class="o">;</span>


<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">mouseHelper</span><span class="o">():</span><span class="nc">MouseHelper</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">_mouseHelper</span><span class="err"> </span><span class="o">==</span> <span class="kc">null</span><span class="o">)</span><span class="err"> </span><span class="n">_mouseHelper</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">MouseHelper</span><span class="o">();</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_mouseHelper</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">mouseStickIntervalMiniSeconds</span><span class="o">():</span><span class="n">uint</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">mouseHelper</span><span class="o">.</span><span class="na">stickHelper</span><span class="o">.</span><span class="na">intervalMiniSeconds</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">mouseStickIntervalMiniSeconds</span><span class="o">(</span><span class="nl">value:</span><span class="n">uint</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">mouseHelper</span><span class="o">.</span><span class="na">stickHelper</span><span class="o">.</span><span class="na">intervalMiniSeconds</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_enableMouseStick:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">enableMouseStick</span><span class="o">():</span><span class="nc">Boolean</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_enableMouseStick</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">enableMouseStick</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Boolean</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_enableMouseStick</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">value</span><span class="err"> </span><span class="o">==</span> <span class="kc">true</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">self:</span><span class="nc">BaseComponent</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">;</span>
<span class="err">                </span><span class="n">mouseHelper</span><span class="o">.</span><span class="na">stickHelper</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="err">                </span><span class="n">mouseHelper</span><span class="o">.</span><span class="na">stickHelper</span><span class="o">.</span><span class="na">callback</span><span class="err"> </span><span class="o">=</span><span class="err"> </span>
<span class="err">                    </span><span class="n">function</span><span class="o">():</span><span class="kt">void</span>
<span class="err">                    </span><span class="o">{</span>
<span class="err">                        </span><span class="n">self</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="s">"mouseStick"</span><span class="o">));</span>
<span class="err">                    </span><span class="o">};</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">else</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">mouseHelper</span><span class="o">.</span><span class="na">stickHelper</span><span class="o">.</span><span class="na">unbind</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">show</span><span class="o">(</span><span class="nl">x:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">NaN</span><span class="o">,</span><span class="err"> </span><span class="nl">y:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">NaN</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">pop:</span><span class="nc">PopUpCanvas</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">PopUpCanvas</span><span class="o">();</span>
<span class="err">            </span><span class="n">pop</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
<span class="err">            </span><span class="n">pop</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">showDialog</span><span class="o">(</span><span class="nl">x:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">NaN</span><span class="o">,</span><span class="err"> </span><span class="nl">y:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">NaN</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">pop:</span><span class="nc">PopUpCanvas</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">PopUpCanvas</span><span class="o">();</span>
<span class="err">            </span><span class="n">pop</span><span class="o">.</span><span class="na">showDialog</span><span class="o">();</span><span class="err">    </span>
<span class="err">            </span><span class="n">pop</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">                </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="nc">BaseComponent</span><span class="o">(</span><span class="nl">parent:</span><span class="nc">DisplayObjectContainer</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">,</span><span class="err"> </span><span class="nl">xpos:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">,</span><span class="err"> </span><span class="nl">ypos:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span> <span class="mi">0</span><span class="o">)</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">move</span><span class="o">(</span><span class="n">xpos</span><span class="o">,</span><span class="err"> </span><span class="n">ypos</span><span class="o">);</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">parent</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">parent</span><span class="o">.</span><span class="na">addChild</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span><span class="n">init</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">init</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">addChildren</span><span class="o">();</span>
<span class="err">            </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">addChildren</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">invalidate</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">removeEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">);</span>
<span class="err">            </span><span class="n">addEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">getShadow</span><span class="o">(</span><span class="nl">dist:</span><span class="nc">Number</span><span class="o">,</span><span class="err"> </span><span class="nl">knockout:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">):</span><span class="nc">DropShadowFilter</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="k">new</span> <span class="nc">DropShadowFilter</span><span class="o">(</span><span class="n">dist</span><span class="o">,</span> <span class="mi">45</span><span class="o">,</span><span class="err"> </span><span class="nc">Style</span><span class="o">.</span><span class="na">DROPSHADOW</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span><span class="err"> </span><span class="n">dist</span><span class="o">,</span><span class="err"> </span><span class="n">dist</span><span class="o">,</span><span class="err"> </span><span class="o">.</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span><span class="err"> </span><span class="n">knockout</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="n">function</span><span class="err"> </span><span class="n">initStage</span><span class="o">(</span><span class="nl">stage:</span><span class="nc">Stage</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">stage</span><span class="o">.</span><span class="na">align</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">StageAlign</span><span class="o">.</span><span class="na">TOP_LEFT</span><span class="o">;</span>
<span class="err">            </span><span class="n">stage</span><span class="o">.</span><span class="na">scaleMode</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">StageScaleMode</span><span class="o">.</span><span class="na">NO_SCALE</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">move</span><span class="o">(</span><span class="nl">xpos:</span><span class="nc">Number</span><span class="o">,</span><span class="err"> </span><span class="nl">ypos:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">xpos</span><span class="o">);</span>
<span class="err">            </span><span class="n">y</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">ypos</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">setSize</span><span class="o">(</span><span class="nl">w:</span><span class="nc">Number</span><span class="o">,</span><span class="err"> </span><span class="nl">h:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">w</span><span class="o">;</span>
<span class="err">            </span><span class="n">_height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">h</span><span class="o">;</span>
<span class="err">            </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">draw</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">BaseComponent</span><span class="o">.</span><span class="na">DRAW</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">(</span><span class="nl">event:</span><span class="nc">Event</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">removeEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">);</span>
<span class="err">            </span><span class="n">draw</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">width</span><span class="o">(</span><span class="nl">w:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">w</span><span class="o">;</span>
<span class="err">            </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">            </span><span class="n">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">width</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_width</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">height</span><span class="o">(</span><span class="nl">h:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">h</span><span class="o">;</span>
<span class="err">            </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">            </span><span class="n">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">height</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_height</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">tag</span><span class="o">(</span><span class="nl">value:</span><span class="kt">int</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_tag</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">tag</span><span class="o">():</span><span class="kt">int</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_tag</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">enabled</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Boolean</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_enabled</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">            </span><span class="n">mouseEnabled</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">mouseChildren</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_enabled</span><span class="o">;</span>
<span class="err">            </span><span class="n">tabEnabled</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">            </span><span class="n">alpha</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_enabled</span><span class="err"> </span><span class="o">?</span> <span class="mf">1.0</span> <span class="o">:</span> <span class="mf">0.5</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">enabled</span><span class="o">():</span><span class="nc">Boolean</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_enabled</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">close</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">parent</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">removeChild</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">maskCanvas</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">maskCanvas</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="s">"closed"</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">callLater</span><span class="o">(</span><span class="nl">callback:</span><span class="nc">Function</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">new</span> <span class="nc">CallLaterHelper</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">stage</span><span class="o">,</span><span class="n">callback</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>


<span class="kn">package</span><span class="err"> </span><span class="nn">orc.common</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.DisplayObject</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.DisplayObjectContainer</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Shape</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.Event</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.geom.Point</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="o">[</span><span class="nc">DefaultProperty</span><span class="o">(</span> <span class="s">"children"</span> <span class="o">)]</span>
<span class="err">    </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"inited"</span><span class="o">,</span><span class="err"> </span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span><span class="err"> </span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseContainer</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">BaseComponent</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_children:</span><span class="nc">Vector</span><span class="o">.&lt;</span><span class="nc">DisplayObject</span><span class="o">&gt;;</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">childrenChanged:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">inited:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">s</span><span class="o">(</span><span class="nl">key:</span><span class="nc">String</span><span class="o">,</span><span class="nl">defaultValue:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">):</span><span class="nc">String</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">l</span><span class="o">.</span><span class="na">i</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">key</span><span class="o">,</span><span class="n">defaultValue</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="cm">/**
         * Array of DisplayObject instances to be added as children
         */</span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">children</span><span class="o">():</span><span class="nc">Vector</span><span class="o">.&lt;</span><span class="nc">DisplayObject</span><span class="o">&gt;</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">_children</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>

<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">children</span><span class="o">(</span><span class="err"> </span><span class="nl">value:</span><span class="nc">Vector</span><span class="o">.&lt;</span><span class="nc">DisplayObject</span><span class="o">&gt;</span><span class="err"> </span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span> <span class="o">(</span><span class="err"> </span><span class="n">_children</span><span class="err"> </span><span class="o">!=</span><span class="err"> </span><span class="n">value</span><span class="err"> </span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">_children</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                   </span> <span class="k">for</span> <span class="n">each</span><span class="o">(</span><span class="kt">var</span> <span class="nl">item:</span><span class="nc">DisplayObject</span> <span class="n">in</span> <span class="n">value</span><span class="o">)</span>
<span class="err">                    </span><span class="o">{</span>
<span class="err">                        </span><span class="n">_children</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
<span class="err">                    </span><span class="o">}</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">_children</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">                </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="nc">BaseContainer</span><span class="o">(</span><span class="nl">parent:</span><span class="nc">DisplayObjectContainer</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">,</span><span class="err"> </span><span class="nl">xpos:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">,</span><span class="err"> </span><span class="nl">ypos:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span> <span class="mi">0</span><span class="o">)</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span><span class="err"> </span><span class="n">xpos</span><span class="o">,</span><span class="err"> </span><span class="n">ypos</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">onInvalidate</span><span class="o">(</span><span class="nl">event:</span><span class="nc">Event</span><span class="o">)</span><span class="err"> </span><span class="o">:</span> <span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span> <span class="o">(</span><span class="err"> </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">while</span> <span class="o">(</span><span class="err"> </span><span class="n">numChildren</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span> <span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">removeChildAt</span><span class="o">(</span> <span class="mi">0</span> <span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">children</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                   </span> <span class="k">for</span> <span class="n">each</span><span class="err"> </span><span class="o">(</span> <span class="kt">var</span> <span class="nl">child:</span><span class="nc">DisplayObject</span> <span class="n">in</span> <span class="n">children</span><span class="err"> </span><span class="o">)</span>
<span class="err">                    </span><span class="o">{</span>
<span class="err">                        </span><span class="n">addChild</span><span class="o">(</span><span class="err"> </span><span class="n">child</span><span class="err"> </span><span class="o">);</span>
<span class="err">                    </span><span class="o">}</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span>
<span class="err">                </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mask</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mask</span><span class="o">))</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                   </span> <span class="k">this</span><span class="o">.</span><span class="na">removeChild</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mask</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">            </span><span class="kd">super</span><span class="o">.</span><span class="na">onInvalidate</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">inited</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">inited</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="s">"inited"</span><span class="o">));</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">removeAllChildren</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">while</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">numChildren</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">removeChildAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_children</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">_children</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">                </span><span class="n">childrenChanged</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">setCenter</span><span class="o">(</span><span class="nl">obj:</span><span class="nc">DisplayObject</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">obj</span><span class="o">.</span><span class="na">x</span><span class="err"> </span><span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span><span class="err"> </span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">-</span><span class="err"> </span><span class="n">obj</span><span class="o">.</span><span class="na">width</span><span class="o">);</span>
<span class="err">            </span><span class="n">obj</span><span class="o">.</span><span class="na">y</span><span class="err"> </span><span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span><span class="err"> </span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">-</span><span class="err"> </span><span class="n">obj</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>



<span class="err">　　</span><span class="n">几个Helper类代码</span><span class="err">：</span>


<span class="kn">package</span><span class="err"> </span><span class="nn">orc.utils</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Stage</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.Event</span><span class="o">;</span>


<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">CallLaterHelper</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="nc">CallLaterHelper</span><span class="o">(</span><span class="nl">stage:</span><span class="nc">Stage</span><span class="o">,</span><span class="err"> </span><span class="nl">callback:</span><span class="nc">Function</span><span class="o">)</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">callback</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">callback</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">stage</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">stage</span><span class="o">;</span>


<span class="err">            </span><span class="n">stage</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onStageEnterFrame</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">stage:</span><span class="nc">Stage</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">callback:</span><span class="nc">Function</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">onStageEnterFrame</span><span class="o">(</span><span class="nl">event:</span><span class="nc">Event</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">stage</span><span class="o">.</span><span class="na">removeEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">ENTER_FRAME</span><span class="o">,</span><span class="err"> </span><span class="n">onStageEnterFrame</span><span class="o">);</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">callback</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">callback</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>


<span class="kn">package</span><span class="err"> </span><span class="nn">orc.utils</span>
<span class="o">{</span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MouseHelper</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_stickHelper:</span><span class="nc">MouseStickHelper</span><span class="o">;</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">stickHelper</span><span class="o">():</span><span class="nc">MouseStickHelper</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">_stickHelper</span><span class="err"> </span><span class="o">==</span> <span class="kc">null</span><span class="o">)</span><span class="err"> </span><span class="n">_stickHelper</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">MouseStickHelper</span><span class="o">();</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_stickHelper</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>


<span class="kn">package</span><span class="err"> </span><span class="nn">orc.utils</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Sprite</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.MouseEvent</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.TimerEvent</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.utils.Timer</span><span class="o">;</span>


<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MouseStickHelper</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">target:</span><span class="nc">Sprite</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">timer:</span><span class="nc">Timer</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">Timer</span><span class="o">(</span><span class="n">intervalMiniSeconds</span><span class="o">);</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">active:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">mouseEvent:</span><span class="nc">MouseEvent</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_intervalMiniSeconds:</span><span class="n">uint</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">intervalMiniSeconds</span><span class="o">():</span><span class="n">uint</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_intervalMiniSeconds</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">intervalMiniSeconds</span><span class="o">(</span><span class="nl">value:</span><span class="n">uint</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_intervalMiniSeconds</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">            </span><span class="n">timer</span><span class="o">.</span><span class="na">delay</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">callback:</span><span class="nc">Function</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">bind</span><span class="o">(</span><span class="nl">obj:</span><span class="nc">Sprite</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">unbind</span><span class="o">();</span>
<span class="err">            </span><span class="n">target</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">obj</span><span class="o">;</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">target</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_DOWN</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseDown</span><span class="o">);</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_OUT</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseOut</span><span class="o">);</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_UP</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseUp</span><span class="o">);</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_MOVE</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseMove</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">unbind</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">target</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">removeEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_DOWN</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseDown</span><span class="o">);</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">removeEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_OUT</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseOut</span><span class="o">);</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">removeEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_UP</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseUp</span><span class="o">);</span>
<span class="err">                </span><span class="n">target</span><span class="o">.</span><span class="na">removeEventListener</span><span class="o">(</span><span class="nc">MouseEvent</span><span class="o">.</span><span class="na">MOUSE_MOVE</span><span class="o">,</span><span class="err"> </span><span class="n">onMouseMove</span><span class="o">);</span>
<span class="err">                </span><span class="n">target</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">                </span><span class="n">reset</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">onMouseDown</span><span class="o">(</span><span class="nl">event:</span><span class="nc">MouseEvent</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">active</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">            </span><span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">hasEventListener</span><span class="o">(</span><span class="nc">TimerEvent</span><span class="o">.</span><span class="na">TIMER</span><span class="o">)</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">timer</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">TimerEvent</span><span class="o">.</span><span class="na">TIMER</span><span class="o">,</span><span class="err"> </span>
<span class="err">                    </span><span class="n">function</span><span class="o">(</span><span class="nl">e:</span><span class="o">*):</span><span class="kt">void</span>
<span class="err">                    </span><span class="o">{</span>
<span class="err">                        </span><span class="n">fireEvent</span><span class="o">();</span>
<span class="err">                    </span><span class="o">}</span>
<span class="err">                </span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span><span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="err">            </span><span class="n">fireEvent</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">fireEvent</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">callback</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">callback</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">onMouseMove</span><span class="o">(</span><span class="nl">event:</span><span class="nc">MouseEvent</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">active</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">onMouseOut</span><span class="o">(</span><span class="nl">event:</span><span class="nc">MouseEvent</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">reset</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">onMouseUp</span><span class="o">(</span><span class="nl">event:</span><span class="nc">MouseEvent</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">reset</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">reset</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">active</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">            </span><span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　下面开始搭积木。先是Shape。只要有背景的地方，都有Shape。下面是Shape的基类：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span><span class="nn">orc.shapes</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.BitmapData</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.common.BaseComponent</span><span class="o">;</span>


<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseShape</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">BaseComponent</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_color:</span><span class="n">uint</span> <span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">color</span><span class="o">():</span><span class="n">uint</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_color</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">color</span><span class="o">(</span><span class="nl">value:</span><span class="n">uint</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">_color</span><span class="err"> </span><span class="o">==</span><span class="err"> </span><span class="n">value</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">            </span><span class="n">_color</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_fillAlpha:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">fillAlpha</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_fillAlpha</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">fillAlpha</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_fillAlpha</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_texture:</span><span class="nc">BitmapData</span><span class="o">;</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">texture</span><span class="o">():</span><span class="nc">BitmapData</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_texture</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">texture</span><span class="o">(</span><span class="nl">value:</span><span class="nc">BitmapData</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_texture</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_borderAlpha:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">borderAlpha</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_borderAlpha</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">borderAlpha</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_borderAlpha</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_borderColor:</span><span class="n">uint</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">borderColor</span><span class="o">():</span><span class="n">uint</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_borderColor</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">borderColor</span><span class="o">(</span><span class="nl">value:</span><span class="n">uint</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_borderColor</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_borderThickness:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">NaN</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">borderThickness</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_borderThickness</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">borderThickness</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_borderThickness</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_descriptor:</span><span class="nc">Descriptor</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">descriptor</span><span class="o">():</span><span class="nc">Descriptor</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_descriptor</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">descriptor</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Descriptor</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_descriptor</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">_descriptor</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">_descriptor</span><span class="o">.</span><span class="na">resize</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　BaseShape 继承了BaseComponent的x,y,width,height等属性，另外提供了填充色，填充透明度，纹理，边界色，边界透明度，边界厚度等属性。而又因为有些形状，比如圆，不方便用x,y,width,height等描述，更方便用圆心和半径描述，因此又提供了descriptor的属性。如，CircularDescriptor： </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span><span class="nn">orc.shapes</span>
<span class="o">{</span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Descriptor</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">resize</span><span class="o">(</span><span class="nl">shape:</span><span class="nc">BaseShape</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>


<span class="kn">package</span><span class="err"> </span><span class="nn">orc.shapes</span>
<span class="o">{</span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">CircularDescriptor</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">Descriptor</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">centerX:</span><span class="nc">Number</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">centerY:</span><span class="nc">Number</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">radius:</span><span class="nc">Number</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="nc">CircularDescriptor</span><span class="o">(</span><span class="nl">centerX:</span><span class="nc">Number</span><span class="o">,</span><span class="nl">centerY:</span><span class="nc">Number</span><span class="o">,</span><span class="nl">radius:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">centerX</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">centerX</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">centerY</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">centerY</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">radius</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">radius</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">override</span> <span class="n">function</span><span class="err"> </span><span class="n">resize</span><span class="o">(</span><span class="nl">shape:</span><span class="nc">BaseShape</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">shape</span><span class="o">.</span><span class="na">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">centerX</span><span class="err"> </span><span class="o">-</span><span class="err"> </span><span class="n">radius</span><span class="o">;</span>
<span class="err">            </span><span class="n">shape</span><span class="o">.</span><span class="na">y</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">centerY</span><span class="err"> </span><span class="o">-</span><span class="err"> </span><span class="n">radius</span><span class="o">;</span>
<span class="err">            </span><span class="n">shape</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">radius</span><span class="err"> </span><span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
<span class="err">            </span><span class="n">shape</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">radius</span><span class="err"> </span><span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　接着是矩形控件： </p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span><span class="nn">orc.shapes</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Graphics</span><span class="o">;</span>


<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Rectangle</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">BaseShape</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_corner:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">NaN</span><span class="o">;</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">corner</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_corner</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">corner</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_corner</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_corners:</span><span class="nc">Array</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">corners</span><span class="o">():</span><span class="nc">Array</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_corners</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">corners</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Array</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_corners</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">override</span> <span class="n">function</span><span class="err"> </span><span class="n">draw</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">g:</span><span class="nc">Graphics</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">graphics</span><span class="o">;</span>
<span class="err">            </span><span class="n">g</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">width</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">height</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">c0:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">corner</span><span class="o">;</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">c1:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">corner</span><span class="o">;</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">c2:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">corner</span><span class="o">;</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">c3:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">corner</span><span class="o">;</span>
<span class="err">                </span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">c:</span><span class="nc">Array</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">corners</span><span class="o">;</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">c</span><span class="o">.</span><span class="na">length</span><span class="err"> </span><span class="o">==</span> <span class="mi">4</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">c0</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Number</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
<span class="err">                    </span><span class="n">c1</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Number</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
<span class="err">                    </span><span class="n">c2</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Number</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="mi">2</span><span class="o">]);</span>
<span class="err">                    </span><span class="n">c3</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Number</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="mi">3</span><span class="o">]);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">isNaN</span><span class="o">(</span><span class="n">c0</span><span class="o">))</span><span class="err"> </span><span class="n">c0</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">isNaN</span><span class="o">(</span><span class="n">c1</span><span class="o">))</span><span class="err"> </span><span class="n">c1</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">isNaN</span><span class="o">(</span><span class="n">c2</span><span class="o">))</span><span class="err"> </span><span class="n">c2</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">isNaN</span><span class="o">(</span><span class="n">c3</span><span class="o">))</span><span class="err"> </span><span class="n">c3</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">                </span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">isNaN</span><span class="o">(</span><span class="n">borderThickness</span><span class="o">)</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">borderThickness</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">lineStyle</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">borderThickness</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">borderColor</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">borderAlpha</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">texture</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">beginBitmapFill</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">texture</span><span class="o">);</span><span class="err">                    </span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">beginFill</span><span class="o">(</span><span class="n">color</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">fillAlpha</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">c0</span><span class="err"> </span><span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">c1</span><span class="err"> </span><span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">c2</span><span class="err"> </span><span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">c3</span><span class="err"> </span><span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">drawRect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">,</span><span class="n">height</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">drawRoundRectComplex</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">,</span><span class="n">height</span><span class="o">,</span><span class="n">c0</span><span class="o">,</span><span class="n">c1</span><span class="o">,</span><span class="n">c2</span><span class="o">,</span><span class="n">c3</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span><span class="n">g</span><span class="o">.</span><span class="na">endFill</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　这个矩形控件可以设置圆角。有了这个控件，各种各样的背景图就都可以实现了：有圆角的、没圆角的、有纹理的、有边界的，等等。
　　椭圆/圆也经常用，写一个：
　　</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span><span class="nn">orc.shapes</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Graphics</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.common.BaseComponent</span><span class="o">;</span>


<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Ellipse</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">BaseShape</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">override</span> <span class="n">function</span><span class="err"> </span><span class="n">draw</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">g:</span><span class="nc">Graphics</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">graphics</span><span class="o">;</span>
<span class="err">            </span><span class="n">g</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">width</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">height</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">isNaN</span><span class="o">(</span><span class="n">borderThickness</span><span class="o">)</span><span class="err"> </span><span class="o">==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span><span class="err"> </span><span class="n">borderThickness</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">lineStyle</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">borderThickness</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">borderColor</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">borderAlpha</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">texture</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">beginBitmapFill</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">texture</span><span class="o">);</span><span class="err">                    </span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">g</span><span class="o">.</span><span class="na">beginFill</span><span class="o">(</span><span class="n">color</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">fillAlpha</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">                </span><span class="n">g</span><span class="o">.</span><span class="na">drawEllipse</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">,</span><span class="n">height</span><span class="o">);</span>
<span class="err">                </span><span class="n">g</span><span class="o">.</span><span class="na">endFill</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">            </span><span class="kd">super</span><span class="o">.</span><span class="na">draw</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　下面，我们建立一个简单的Canvas类，这个Canvas类可以设置背景，可以设置边界（背景和边界是用上面的Rectangle 类实现的。</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;common:BaseContainer</span><span class="err"> </span><span class="na">xmlns:fx=</span><span class="s">"[http://ns.adobe.com/mxml/2009](http://ns.adobe.com/mxml/2009)"</span>
<span class="err">                      </span><span class="na">xmlns:mx=</span><span class="s">"library://ns.adobe.com/flex/mx"</span>
<span class="err">                      </span><span class="na">xmlns:common=</span><span class="s">"orc.common.*"</span>
<span class="err">                      </span><span class="na">width=</span><span class="s">"400"</span> <span class="na">height=</span><span class="s">"300"</span>
<span class="err">                      </span><span class="na">xmlns:controls=</span><span class="s">"orc.controls.*"</span>
<span class="err">                      </span><span class="na">xmlns:shapes=</span><span class="s">"orc.shapes.*"</span>
<span class="err">                      </span><span class="nt">&gt;</span>
    <span class="nt">&lt;fx:Script&gt;</span>
        <span class="cp">&lt;![CDATA[
            [Bindable] 
            public var bgColor:uint = 0xFFFFFF;
            
            [Bindable]
            public var bgCorner:Number = NaN;
            
            [Bindable]
            public var bgCorners:Array = null;
            
            [Bindable]
            public var bgAlpha:Number = 1;
            
            [Bindable]
            public var bgEnabled:Boolean = true;
            
            [Bindable]
            public var bgBorderThickness:Number = NaN;
            
            [Bindable]
            public var bgBorderColor:Number = 0xFFFFFF;
            
            [Bindable]
            public var bgFillAlpha:Number = 1;
            
            [Bindable]
            public var bgBorderAlpha:Number = 1;
            
        ]]&gt;</span>
    <span class="nt">&lt;/fx:Script&gt;</span>
    <span class="nt">&lt;shapes:Rectangle</span><span class="err"> </span><span class="na">id=</span><span class="s">"background"</span> <span class="na">width=</span><span class="s">"{width}"</span> <span class="na">height=</span><span class="s">"{height}"</span>
<span class="err">                       </span><span class="na">corner=</span><span class="s">"{bgCorner}"</span> <span class="na">corners=</span><span class="s">"{bgCorners}"</span>
<span class="err">                       </span><span class="na">color=</span><span class="s">"{bgColor}"</span>
<span class="err">                       </span><span class="na">alpha=</span><span class="s">"{bgEnabled?bgAlpha:bgAlpha*0.3}"</span>
<span class="err">                       </span><span class="na">borderColor=</span><span class="s">"{bgBorderColor}"</span>
<span class="err">                       </span><span class="na">borderThickness=</span><span class="s">"{bgBorderThickness}"</span>
<span class="err">                       </span><span class="na">fillAlpha=</span><span class="s">"{bgFillAlpha}"</span> <span class="na">borderAlpha=</span><span class="s">"{bgBorderAlpha}"</span>
<span class="err">                       </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/common:BaseContainer&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　一个Canvas就是这么简单！下面，建立Image控件，这个Image支持九宫格（如果不知道九宫格，请Google之）：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span><span class="nn">orc.controls</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.AVM1Movie</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Bitmap</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.BitmapData</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.DisplayObject</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.Loader</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.MovieClip</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.Event</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.geom.Matrix</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.geom.Rectangle</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.net.URLRequest</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.common.Avm1Loader</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.common.BaseComponent</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.common.ScaleBitmap</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"complete"</span><span class="o">,</span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Image</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">BaseComponent</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nl">MODE_9GRID:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="s">"9grid"</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_source:</span><span class="o">*;</span>


<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">source</span><span class="o">():*</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_source</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>


<span class="err">        </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">source</span><span class="o">(</span><span class="nl">value:</span><span class="o">*):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_source</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">onInvalidate</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">        </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">sourceScale9Grid:</span><span class="nc">Rectangle</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">mode:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="no">MODE_9GRID</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="nc">Image</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">override</span> <span class="n">function</span><span class="err"> </span><span class="n">draw</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">.</span><span class="na">draw</span><span class="o">();</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">source</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">source</span> <span class="n">is</span> <span class="nc">BitmapData</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">drawBitmapData</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">source</span> <span class="n">is</span> <span class="nc">Bitmap</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                    </span><span class="n">drawBitmapData</span><span class="o">(</span><span class="nc">Bitmap</span><span class="o">(</span><span class="n">source</span><span class="o">).</span><span class="na">bitmapData</span><span class="o">);</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">source</span> <span class="n">is</span> <span class="nc">Class</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                   </span> <span class="kt">var</span> <span class="nl">bmp:</span><span class="nc">Bitmap</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="n">source</span><span class="o">()</span> <span class="n">as</span> <span class="nc">Bitmap</span><span class="o">;</span>
<span class="err">                   </span> <span class="k">if</span><span class="o">(</span><span class="n">bmp</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">                    </span><span class="o">{</span>
<span class="err">                        </span><span class="n">drawBitmapData</span><span class="o">(</span><span class="n">bmp</span><span class="o">.</span><span class="na">bitmapData</span><span class="o">);</span>
<span class="err">                    </span><span class="o">}</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">               </span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">source</span> <span class="n">is</span> <span class="nc">String</span><span class="o">)</span>
<span class="err">                </span><span class="o">{</span>
<span class="err">                   </span> <span class="k">if</span><span class="o">(</span><span class="n">_loader</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">                    </span><span class="o">{</span>
<span class="err">                        </span><span class="n">_loader</span><span class="o">.</span><span class="na">contentLoaderInfo</span><span class="o">.</span><span class="na">removeEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">COMPLETE</span><span class="o">,</span><span class="n">loadCompleted</span><span class="o">);</span>
<span class="err">                    </span><span class="o">}</span>
<span class="err">                    </span>
<span class="err">                    </span><span class="n">_loader</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">Loader</span><span class="o">();</span>
<span class="err">                    </span><span class="n">_loader</span><span class="o">.</span><span class="na">contentLoaderInfo</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">COMPLETE</span><span class="o">,</span><span class="n">loadCompleted</span><span class="o">);</span>
<span class="err">                    </span><span class="n">_loader</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="k">new</span> <span class="nc">URLRequest</span><span class="o">(</span><span class="n">source</span><span class="o">));</span>
<span class="err">                </span><span class="o">}</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">else</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">clear</span><span class="o">();</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">loadCompleted</span><span class="o">(</span><span class="nl">e:</span><span class="nc">Event</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">clear</span><span class="o">();</span>
<span class="err">            </span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">d:</span><span class="nc">DisplayObject</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_loader</span><span class="o">.</span><span class="na">content</span><span class="o">;</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">child:</span><span class="nc">DisplayObject</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">d</span><span class="o">;</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">d</span> <span class="n">is</span> <span class="nc">AVM1Movie</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">bmpData:</span><span class="nc">BitmapData</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">BitmapData</span><span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">width</span><span class="o">,</span><span class="n">d</span><span class="o">.</span><span class="na">height</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span>
<span class="err">                </span><span class="n">bmpData</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>
<span class="err">                </span><span class="n">child</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">Bitmap</span><span class="o">(</span><span class="n">bmpData</span><span class="o">,</span><span class="s">"auto"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">d</span> <span class="n">is</span> <span class="nc">Bitmap</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="nc">Bitmap</span><span class="o">(</span><span class="n">d</span><span class="o">).</span><span class="na">smoothing</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">xx:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">/</span><span class="err"> </span><span class="n">child</span><span class="o">.</span><span class="na">width</span><span class="o">;</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">yy:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">/</span><span class="err"> </span><span class="n">child</span><span class="o">.</span><span class="na">height</span><span class="o">;</span>
<span class="err">               </span> <span class="kt">var</span> <span class="nl">scale:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">xx</span><span class="o">,</span><span class="n">yy</span><span class="o">);</span>
<span class="err">                </span><span class="n">child</span><span class="o">.</span><span class="na">scaleX</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">scale</span><span class="o">;</span>
<span class="err">                </span><span class="n">child</span><span class="o">.</span><span class="na">scaleY</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">scale</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">else</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">_width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">child</span><span class="o">.</span><span class="na">width</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">_height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">child</span><span class="o">.</span><span class="na">height</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">));</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">_bgBitmap</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">child</span><span class="o">;</span>
<span class="err">            </span><span class="n">addChild</span><span class="o">(</span><span class="n">child</span><span class="o">);</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">COMPLETE</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_loader:</span><span class="nc">Loader</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_bgBitmap:</span><span class="nc">DisplayObject</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">private</span> <span class="n">function</span><span class="err"> </span><span class="n">clear</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">_bgBitmap</span><span class="err"> </span><span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">removeChild</span><span class="o">(</span><span class="n">_bgBitmap</span><span class="o">);</span>
<span class="err">                </span><span class="n">_bgBitmap</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">drawBitmapData</span><span class="o">(</span><span class="nl">bmpData:</span><span class="nc">BitmapData</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">clear</span><span class="o">();</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">bmpData</span><span class="err"> </span><span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">_width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">bmpData</span><span class="o">.</span><span class="na">width</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">_height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">bmpData</span><span class="o">.</span><span class="na">height</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">));</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">sb:</span><span class="nc">ScaleBitmap</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">ScaleBitmap</span><span class="o">(</span><span class="n">bmpData</span><span class="o">,</span><span class="s">"auto"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="err">            </span><span class="n">sb</span><span class="o">.</span><span class="na">scale9Grid</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">sourceScale9Grid</span><span class="o">;</span>
<span class="err">            </span><span class="n">sb</span><span class="o">.</span><span class="na">setSize</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="o">,</span><span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>
<span class="err">            </span><span class="n">_bgBitmap</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">sb</span><span class="o">;</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">addChild</span><span class="o">(</span><span class="n">sb</span><span class="o">);</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">COMPLETE</span><span class="o">));</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">getBitmap</span><span class="o">():</span><span class="nc">Bitmap</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_bgBitmap</span><span class="err"> </span><span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">bmpData:</span><span class="nc">BitmapData</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">BitmapData</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_bgBitmap</span><span class="o">.</span><span class="na">width</span><span class="o">,</span><span class="k">this</span><span class="o">.</span><span class="na">_bgBitmap</span><span class="o">.</span><span class="na">height</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="err">            </span><span class="n">bmpData</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_bgBitmap</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Matrix</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_bgBitmap</span><span class="o">.</span><span class="na">scaleX</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="k">this</span><span class="o">.</span><span class="na">_bgBitmap</span><span class="o">.</span><span class="na">scaleY</span><span class="o">));</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">bmp:</span><span class="nc">Bitmap</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">Bitmap</span><span class="o">(</span><span class="n">bmpData</span><span class="o">);</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">bmp</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　那么，我们如何让Canvas或BaseContainer中显示背景图呢？简单，在里面放个Image控件即可，比如，这是我写的ImageButton控件：</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;common:BaseContainer</span><span class="err"> </span><span class="na">xmlns:fx=</span><span class="s">"[http://ns.adobe.com/mxml/2009](http://ns.adobe.com/mxml/2009)"</span>
<span class="err">                   </span><span class="na">xmlns:mx=</span><span class="s">"library://ns.adobe.com/flex/mx"</span>
<span class="err">                   </span><span class="na">xmlns:oc=</span><span class="s">"orc.controls.*"</span>
<span class="err">                   </span><span class="na">xmlns:common=</span><span class="s">"orc.common.*"</span>
<span class="err">                   </span><span class="na">buttonMode=</span><span class="s">"true"</span> <span class="na">useHandCursor=</span><span class="s">"true"</span>
<span class="err">                   </span><span class="na">mouseChildren=</span><span class="s">"{enable}"</span> <span class="na">mouseEnabled=</span><span class="s">"{enable}"</span>
<span class="err">                   </span><span class="na">mouseOver=</span><span class="s">"{if(enable == true) alpha=0.6;}"</span>
<span class="err">                   </span><span class="na">mouseOut=</span><span class="s">"{if(enable == true) alpha=1;}"</span>
<span class="err">                   </span><span class="nt">&gt;</span>
    <span class="nt">&lt;fx:Script&gt;</span>
        <span class="cp">&lt;![CDATA[
            [Bindable]
            public var source:*;
            
            public function get enable():Boolean
            {
                return img ? img.enabled : true;
            }


            [Bindable]
            public function set enable(value:Boolean):void
            {
                img.enabled = value;
                if(value == true) alpha = 1;
            }
        ]]&gt;</span>
    <span class="nt">&lt;/fx:Script&gt;</span>
    <span class="nt">&lt;oc:Image</span><span class="err"> </span><span class="na">id=</span><span class="s">"img"</span> <span class="na">source=</span><span class="s">"{source}"</span> <span class="na">mouseChildren=</span><span class="s">"false"</span> <span class="na">mouseEnabled=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/common:BaseContainer&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　Label控件离不了，恩，就在网上的一份代码基础上写个Label控件：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
</pre></td><td class="rouge-code"><pre><span class="kn">package</span><span class="err"> </span><span class="nn">orc.controls</span>
<span class="o">{</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.display.DisplayObjectContainer</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.events.Event</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.text.TextField</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.text.TextFieldAutoSize</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">flash.text.TextFormat</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.common.BaseComponent</span><span class="o">;</span>
<span class="err">    </span><span class="kn">import</span><span class="err"> </span><span class="nn">orc.common.Style</span><span class="o">;</span>
<span class="err">    </span>
<span class="err">    </span><span class="o">[</span><span class="nc">Event</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"resize"</span><span class="o">,</span><span class="err"> </span><span class="n">type</span><span class="o">=</span><span class="s">"flash.events.Event"</span><span class="o">)]</span>
<span class="err">   </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Label</span><span class="err"> </span><span class="kd">extends</span><span class="err"> </span><span class="nc">BaseComponent</span>
<span class="err">    </span><span class="o">{</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_autoSize:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_text:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="s">""</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">protected</span> <span class="kt">var</span> <span class="nl">_tf:</span><span class="nc">TextField</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">fontName:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Style</span><span class="o">.</span><span class="na">fontName</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">fontSize:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">Style</span><span class="o">.</span><span class="na">fontSize</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">fontColor:</span><span class="n">uint</span> <span class="o">=</span> <span class="mh">0x000000</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">align:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="s">"left"</span><span class="o">;</span>
<span class="err">       </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">bold:</span><span class="nc">Boolean</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="nc">Label</span><span class="o">(</span><span class="nl">parent:</span><span class="nc">DisplayObjectContainer</span><span class="err"> </span><span class="o">=</span> <span class="kc">null</span><span class="o">,</span><span class="err"> </span><span class="nl">xpos:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">,</span><span class="err"> </span><span class="nl">ypos:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span><span class="err"> </span> <span class="mi">0</span><span class="o">,</span><span class="err"> </span><span class="nl">text:</span><span class="nc">String</span><span class="err"> </span><span class="o">=</span> <span class="s">""</span><span class="o">)</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">this</span><span class="o">.</span><span class="na">text</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">text</span><span class="o">;</span>
<span class="err">            </span><span class="kd">super</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span><span class="err"> </span><span class="n">xpos</span><span class="o">,</span><span class="err"> </span><span class="n">ypos</span><span class="o">);</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">init</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">.</span><span class="na">init</span><span class="o">();</span>
<span class="err">            </span><span class="n">mouseEnabled</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">            </span><span class="n">mouseChildren</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">protected</span> <span class="n">function</span><span class="err"> </span><span class="n">addChildren</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_height</span><span class="err"> </span><span class="o">=</span> <span class="mi">18</span><span class="o">;</span>
<span class="err">            </span><span class="n">_tf</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">TextField</span><span class="o">();</span>
<span class="err">            </span><span class="n">_tf</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_height</span><span class="o">;</span>
<span class="err">            </span><span class="n">_tf</span><span class="o">.</span><span class="na">selectable</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">            </span><span class="n">_tf</span><span class="o">.</span><span class="na">mouseEnabled</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">            </span><span class="n">_tf</span><span class="o">.</span><span class="na">text</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_text</span><span class="o">;</span><span class="err">            </span>
<span class="err">            </span><span class="n">addChild</span><span class="o">(</span><span class="n">_tf</span><span class="o">);</span>
<span class="err">            </span><span class="n">draw</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="n">override</span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">draw</span><span class="o">():</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="kd">super</span><span class="o">.</span><span class="na">draw</span><span class="o">();</span>
<span class="err">           </span> <span class="kt">var</span> <span class="nl">f:</span><span class="nc">TextFormat</span><span class="err"> </span><span class="o">=</span> <span class="k">new</span> <span class="nc">TextFormat</span><span class="o">(</span><span class="n">fontName</span><span class="o">,</span><span class="n">fontSize</span><span class="o">,</span><span class="n">fontColor</span><span class="o">);</span>
<span class="err">            </span><span class="n">f</span><span class="o">.</span><span class="na">align</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">align</span><span class="o">;</span>
<span class="err">            </span><span class="n">f</span><span class="o">.</span><span class="na">bold</span><span class="err"> </span><span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">bold</span><span class="o">;</span>
<span class="err">            </span><span class="n">_tf</span><span class="o">.</span><span class="na">defaultTextFormat</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">f</span><span class="o">;</span>
<span class="err">            </span><span class="n">_tf</span><span class="o">.</span><span class="na">text</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_text</span><span class="o">;</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">_autoSize</span><span class="o">)</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">_tf</span><span class="o">.</span><span class="na">autoSize</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">TextFieldAutoSize</span><span class="o">.</span><span class="na">LEFT</span><span class="o">;</span>
<span class="err">                </span><span class="n">_width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_tf</span><span class="o">.</span><span class="na">width</span><span class="o">;</span>
<span class="err">                </span><span class="n">dispatchEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">Event</span><span class="o">(</span><span class="nc">Event</span><span class="o">.</span><span class="na">RESIZE</span><span class="o">));</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">           </span> <span class="k">else</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="n">_tf</span><span class="o">.</span><span class="na">autoSize</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="nc">TextFieldAutoSize</span><span class="o">.</span><span class="na">NONE</span><span class="o">;</span>
<span class="err">                </span><span class="n">_tf</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_width</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span><span class="n">_height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">_tf</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">=</span> <span class="mi">18</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">text</span><span class="o">(</span><span class="nl">t:</span><span class="nc">String</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_text</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">t</span><span class="o">;</span>
<span class="err">           </span> <span class="k">if</span><span class="o">(</span><span class="n">_text</span><span class="err"> </span><span class="o">==</span> <span class="kc">null</span><span class="o">)</span><span class="err"> </span><span class="n">_text</span><span class="err"> </span><span class="o">=</span> <span class="s">""</span><span class="o">;</span>
<span class="err">            </span><span class="n">invalidate</span><span class="o">();</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">text</span><span class="o">():</span><span class="nc">String</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_text</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">autoSize</span><span class="o">(</span><span class="nl">b:</span><span class="nc">Boolean</span><span class="o">):</span><span class="kt">void</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">            </span><span class="n">_autoSize</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">b</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">autoSize</span><span class="o">():</span><span class="nc">Boolean</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_autoSize</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">        </span>
<span class="err">       </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">textField</span><span class="o">():</span><span class="nc">TextField</span>
<span class="err">        </span><span class="o">{</span>
<span class="err">           </span> <span class="k">return</span> <span class="n">_tf</span><span class="o">;</span>
<span class="err">        </span><span class="o">}</span>
<span class="err">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>　　接下来Button控件呼之欲出：</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;containers:Canvas</span><span class="err"> </span><span class="na">xmlns:fx=</span><span class="s">"[http://ns.adobe.com/mxml/2009](http://ns.adobe.com/mxml/2009)"</span>
<span class="err">                   </span><span class="na">xmlns:mx=</span><span class="s">"library://ns.adobe.com/flex/mx"</span>
<span class="err">                   </span><span class="na">xmlns:common=</span><span class="s">"orc.common.*"</span>
<span class="err">                   </span><span class="na">xmlns:controls=</span><span class="s">"controls.*"</span>
<span class="err">                   </span><span class="na">xmlns:oc=</span><span class="s">"orc.controls.*"</span>
<span class="err">                   </span><span class="na">xmlns:containers=</span><span class="s">"orc.containers.*"</span>
<span class="err">                   </span><span class="na">width=</span><span class="s">"120"</span> <span class="na">height=</span><span class="s">"24"</span>
<span class="err">                   </span><span class="na">bgColor=</span><span class="s">"{isMouseOver?mouseOverColor:defaultColor}"</span>
<span class="err">                   </span><span class="na">bgCorner=</span><span class="s">"6"</span>
<span class="err">                   </span><span class="na">buttonMode=</span><span class="s">"true"</span> <span class="na">useHandCursor=</span><span class="s">"true"</span>
<span class="err">                   </span><span class="na">mouseOver=</span><span class="s">"{isMouseOver = true}"</span>
<span class="err">                   </span><span class="na">mouseOut=</span><span class="s">"{isMouseOver = false}"</span>
<span class="err">                   </span><span class="nt">&gt;</span>
    <span class="nt">&lt;fx:Script&gt;</span>
        <span class="cp">&lt;![CDATA[
            [Bindable]
            public var label:String = "";
            
            [Bindable]
            public var labelHeight:Number = 20;
            
            [Bindable]
            public var defaultColor:uint = 0xCCCCCC;
            
            [Bindable]
            public var mouseOverColor:uint = 0xDDDDDD;
            
            [Bindable]
            public var isMouseOver:Boolean = false;
        ]]&gt;</span>
    <span class="nt">&lt;/fx:Script&gt;</span>
    <span class="nt">&lt;oc:Label</span><span class="err"> </span><span class="na">id=</span><span class="s">"lbLabel"</span> <span class="na">text=</span><span class="s">"{label}"</span> <span class="na">width=</span><span class="s">"{width}"</span> <span class="na">y=</span><span class="s">"{0.5*(height-labelHeight)}"</span>
<span class="err">              </span><span class="na">mouseEnabled=</span><span class="s">"false"</span> <span class="na">height=</span><span class="s">"{labelHeight}"</span> <span class="na">fontSize=</span><span class="s">"12"</span> <span class="na">align=</span><span class="s">"center"</span>
<span class="err">              </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/containers:Canvas&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>进度条Progress就太容易了：</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;containers:Canvas</span><span class="err"> </span><span class="na">xmlns:fx=</span><span class="s">"[http://ns.adobe.com/mxml/2009](http://ns.adobe.com/mxml/2009)"</span>
<span class="err">                   </span><span class="na">xmlns:mx=</span><span class="s">"library://ns.adobe.com/flex/mx"</span>
<span class="err">                   </span><span class="na">xmlns:common=</span><span class="s">"orc.common.*"</span>
<span class="err">                   </span><span class="na">xmlns:controls=</span><span class="s">"orc.controls.*"</span>
<span class="err">                   </span><span class="na">xmlns:containers=</span><span class="s">"orc.containers.*"</span>
<span class="err">                   </span><span class="na">xmlns:shapes=</span><span class="s">"orc.shapes.*"</span>
<span class="err">                   </span><span class="na">bgBorderThickness=</span><span class="s">"1"</span> <span class="na">bgColor=</span><span class="s">"0xFFFFFF"</span> <span class="na">bgBorderColor=</span><span class="s">"0x333333"</span>
<span class="err">                   </span><span class="na">width=</span><span class="s">"200"</span> <span class="na">height=</span><span class="s">"20"</span>
<span class="err">                   </span><span class="nt">&gt;</span>
    <span class="nt">&lt;fx:Script&gt;</span>
        <span class="cp">&lt;![CDATA[
            [Bindable]
            public var percent:Number = 0;
            
            [Bindable]
            public var fillColor:uint = 0x0000FF;
            
            private function getWidth(val:Number):Number
            {
                var ww:Number = this.width - 2;
                return ww * val;
            }
        ]]&gt;</span>
    <span class="nt">&lt;/fx:Script&gt;</span>
    <span class="nt">&lt;shapes:Rectangle</span><span class="err"> </span><span class="na">x=</span><span class="s">"1"</span> <span class="na">y=</span><span class="s">"1"</span> <span class="na">color=</span><span class="s">"{fillColor}"</span> <span class="na">height=</span><span class="s">"{height-2}"</span> <span class="na">width=</span><span class="s">"{getWidth(percent)}"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/containers:Canvas&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　定位？容易！有数据绑定，想让它在哪里就在哪里，如：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>x="{0.5*width-borderThickness*0.5}" y="{-handleLength}"
</pre></td></tr></tbody></table></code></pre></div></div>

<p>带图标的按钮：</p>

<p><img src="https://cdn.jsdelivr.net/gh/yanglr/images/combo-button.jpg" alt="极客玩家大白-ComboButton" title="极客玩家大白" /></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;containers:Canvas</span><span class="err"> </span><span class="na">xmlns:fx=</span><span class="s">"[http://ns.adobe.com/mxml/2009](http://ns.adobe.com/mxml/2009)"</span>
<span class="err">           </span><span class="na">xmlns:mx=</span><span class="s">"library://ns.adobe.com/flex/mx"</span>
<span class="err">           </span><span class="na">xmlns:containers=</span><span class="s">"orc.containers.*"</span>
<span class="err">           </span><span class="na">xmlns:controls=</span><span class="s">"orc.controls.*"</span>
<span class="err">           </span><span class="na">mouseChildren=</span><span class="s">"false"</span>
<span class="err">           </span><span class="na">bgCorner=</span><span class="s">"5"</span>
<span class="err">           </span><span class="na">buttonMode=</span><span class="s">"true"</span> <span class="na">useHandCursor=</span><span class="s">"true"</span>
<span class="err">           </span><span class="na">mouseOver=</span><span class="s">"{alpha=0.9;}"</span>
<span class="err">           </span><span class="na">mouseOut=</span><span class="s">"{alpha=1;}"</span>
<span class="err">           </span><span class="na">width=</span><span class="s">"200"</span> <span class="na">height=</span><span class="s">"50"</span>
<span class="err">           </span><span class="nt">&gt;</span>
    <span class="nt">&lt;fx:Script&gt;</span>
        <span class="cp">&lt;![CDATA[
            [Bindable]
            public var source:Class;
            
            [Bindable]
            public var label:String;
        ]]&gt;</span>
    <span class="nt">&lt;/fx:Script&gt;</span>
    <span class="nt">&lt;controls:Image</span><span class="err"> </span><span class="na">x=</span><span class="s">"30"</span> <span class="na">y=</span><span class="s">"10"</span> <span class="na">source=</span><span class="s">"{source}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;controls:Label</span><span class="err"> </span><span class="na">x=</span><span class="s">"70"</span> <span class="na">y=</span><span class="s">"18"</span>
<span class="err">                    </span><span class="na">text=</span><span class="s">"{label}"</span>
<span class="err">                    </span><span class="na">fontSize=</span><span class="s">"12"</span>
<span class="err">                    </span><span class="na">width=</span><span class="s">"120"</span>
<span class="err">                    </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/containers:Canvas&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　HSlider: </p>

<p><img src="https://cdn.jsdelivr.net/gh/yanglr/images/slider.jpg" alt="极客玩家大白-Slider" title="极客玩家大白" /></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;containers:Canvas</span><span class="err"> </span><span class="na">xmlns:fx=</span><span class="s">"[http://ns.adobe.com/mxml/2009](http://ns.adobe.com/mxml/2009)"</span>
<span class="err">                   </span><span class="na">xmlns:mx=</span><span class="s">"library://ns.adobe.com/flex/mx"</span>
<span class="err">                   </span><span class="na">xmlns:common=</span><span class="s">"orc.common.*"</span>
<span class="err">                   </span><span class="na">xmlns:controls=</span><span class="s">"controls.*"</span>
<span class="err">                   </span><span class="na">xmlns:containers=</span><span class="s">"orc.containers.*"</span>
<span class="err">                   </span><span class="na">xmlns:shapes=</span><span class="s">"orc.shapes.*"</span>
<span class="err">                   </span><span class="na">width=</span><span class="s">"264"</span> <span class="na">height=</span><span class="s">"22"</span>
<span class="err">                   </span><span class="na">bgAlpha=</span><span class="s">"0"</span>
<span class="err">                   </span><span class="na">inited=</span><span class="s">"onInited()"</span>
<span class="err">                   </span><span class="nt">&gt;</span>
    <span class="nt">&lt;fx:Metadata&gt;</span>
        [Event(name="drag",type="flash.events.Event")]
    <span class="nt">&lt;/fx:Metadata&gt;</span>
    <span class="nt">&lt;fx:Script&gt;</span>
        <span class="cp">&lt;![CDATA[
            import orc.events.MoveEvent;
            import orc.utils.DragHelper;
            
            [Bindable]
            public var maximum:Number = 3;
            [Bindable]
            public var minimum:Number = 0;
            [Bindable]
            public var value:Number = minimum;
            
            private var dragHelper:DragHelper = new DragHelper();
            
            private function get minX():Number
            {
                return 0;
            }
            
            private function get maxX():Number
            {
                return this.width - btnDrag.width + 1;
            }
            
            private function checkX(val:Number):Number
            {
                val = Math.max(val,minX);
                val = Math.min(val,maxX);
                return val;
            }
            
            private function checkValue(val:Number):Number
            {
                val = Math.max(val,minimum);
                val = Math.min(val,maximum);
                return val;
            }
            
            private function getX(val:Number, min:Number = NaN, max:Number = NaN):Number
            {
                val = this.checkValue(val);
                return minX + (maxX - minX) * (val - minimum ) / (maximum - minimum);
            }
            
            private function onInited():void
            {
                dragHelper.bind(btnDrag, this);
                dragHelper.addEventListener(MoveEvent.MOVING, onDrag);
            }
            
            private function onDrag(event:MoveEvent):void
            {
                var xx:Number = checkX(event.xOffSet/this.scaleX + btnDrag.x);
                dragToX(xx);
            }
            
            private function dragToX(val:Number):void
            {
                this.value = convertX2Value(val);
                this.dispatchEvent(new Event("drag"));                
            }
            
            private function convertX2Value(x:Number):Number
            {
                var val:Number = minimum + (maximum - minimum) * (x - minX ) / (maxX - minX);
                return checkValue(val);
            }
            
            private function onMouseStick(e:Event):void
            {
                var step:Number = 5;
                var xx:Number = this.btnDrag.x;
                if(this.btnDrag.mouseX &gt;</span> 0)
                {
                    xx += step;
                }
                else
                {
                    xx -= step;
                }
                
                dragToX(xx);
            }
        ]]&gt;
    <span class="nt">&lt;/fx:Script&gt;</span>
    <span class="nt">&lt;controls:ImageButton</span><span class="err"> </span><span class="na">y=</span><span class="s">"1.4"</span>
<span class="err">                          </span><span class="na">width=</span><span class="s">"264"</span> <span class="na">height=</span><span class="s">"22"</span>
<span class="err">                          </span><span class="na">enableMouseStick=</span><span class="s">"true"</span>
<span class="err">                          </span><span class="na">mouseStick=</span><span class="s">"onMouseStick(event)"</span>
<span class="err">                          </span><span class="na">mouseStickIntervalMiniSeconds=</span><span class="s">"40"</span>
<span class="err">                          </span><span class="na">source=</span><span class="s">"@Embed(source='assets/hsliderBg.png')"</span>
<span class="err">                          </span><span class="nt">/&gt;</span>
    <span class="nt">&lt;controls:ImageButton</span><span class="err"> </span><span class="na">source=</span><span class="s">"@Embed(source='assets/slider.png')"</span>
<span class="err">                          </span><span class="na">id=</span><span class="s">"btnDrag"</span> <span class="err"> </span><span class="na">x=</span><span class="s">"{getX(value, minimum, maximum)}"</span>
<span class="err">                          </span><span class="na">width=</span><span class="s">"25"</span> <span class="na">height=</span><span class="s">"25"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/containers:Canvas&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　图像拉伸、旋转、缩放、删除的控制框控件复杂一点，400多行，代码贴时出错了，就不贴了，效果图：</p>

<p><img src="https://cdn.jsdelivr.net/gh/yanglr/images/resize-box.jpg" alt="极客玩家大白-resize box" title="极客玩家大白" /></p>

<p>　　当然，滚动条啥的控件就复杂一点，不想写可以就拿Flash里自带的包装一下，照样用。
　　然后是动画，动画也很容易，下面是让一个界面慢慢的变小的代码：</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="rouge-code"><pre><span class="err">            </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">           </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">centerX:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">            </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">           </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">centerY:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">            </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">           </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">targetWinth:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">            </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">           </span> <span class="kd">public</span> <span class="kt">var</span> <span class="nl">targetHeight:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">           </span> <span class="kd">private</span> <span class="kt">var</span> <span class="nl">_percent:</span><span class="nc">Number</span><span class="err"> </span><span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err">            </span>
<span class="err">           </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">get</span> <span class="nf">percent</span><span class="o">():</span><span class="nc">Number</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">return</span> <span class="n">_percent</span><span class="o">;</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">            </span><span class="o">[</span><span class="nc">Bindable</span><span class="o">]</span>
<span class="err">           </span> <span class="kd">public</span> <span class="n">function</span> <span class="n">set</span> <span class="nf">percent</span><span class="o">(</span><span class="nl">value:</span><span class="nc">Number</span><span class="o">):</span><span class="kt">void</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">               </span> <span class="k">if</span><span class="o">(</span><span class="n">value</span><span class="err"> </span><span class="o">==</span> <span class="mi">1</span><span class="o">)</span><span class="err"> </span><span class="n">cvs</span><span class="o">.</span><span class="na">visible</span><span class="err"> </span><span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="err">               </span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">cvs</span><span class="o">.</span><span class="na">visible</span><span class="err"> </span><span class="o">==</span> <span class="kc">true</span><span class="o">)</span><span class="err"> </span><span class="n">cvs</span><span class="o">.</span><span class="na">visible</span><span class="err"> </span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="err">                </span>
<span class="err">                </span><span class="n">_percent</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">targetWinth</span><span class="err"> </span><span class="o">*</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">targetHeight</span><span class="err"> </span><span class="o">*</span><span class="err"> </span><span class="n">value</span><span class="o">;</span>
<span class="err">               </span> <span class="k">this</span><span class="o">.</span><span class="na">callLater</span><span class="o">(</span>
<span class="err">                    </span><span class="n">function</span><span class="o">():</span><span class="kt">void</span>
<span class="err">                    </span><span class="o">{</span>
<span class="err">                        </span><span class="n">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">centerX</span><span class="err"> </span><span class="o">-</span><span class="err"> </span><span class="n">width</span><span class="err"> </span><span class="o">*</span> <span class="mf">0.5</span><span class="o">;</span>
<span class="err">                        </span><span class="n">y</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">centerY</span><span class="err"> </span><span class="o">-</span><span class="err"> </span><span class="n">height</span><span class="err"> </span><span class="o">*</span> <span class="mf">0.5</span><span class="o">;</span>
<span class="err">                    </span><span class="o">});</span>
<span class="err">            </span><span class="o">}</span>
<span class="err">            </span>
<span class="err">           </span> <span class="kd">public</span> <span class="n">function</span><span class="err"> </span><span class="n">min</span><span class="o">():</span><span class="kt">void</span>
<span class="err">            </span><span class="o">{</span>
<span class="err">                </span><span class="nc">TweenLite</span><span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="mf">0.5</span><span class="o">,{</span><span class="nl">percent:</span><span class="mi">0</span><span class="o">});</span>
<span class="err">            </span><span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>　　看看我做的一个项目的整体效果图，这些界面大部分都是从Draw API一步步绘制的：</p>

<p><img src="https://cdn.jsdelivr.net/gh/yanglr/images/datoutie.jpg" alt="极客玩家大白-大头贴" title="极客玩家大白" /></p>

<p> 　 as3有个叫haXe的兄弟语言，haXe写的代码可以在Flash平台运行，可以在js环境运行，铺平了向html5的过渡之途。
下面，回答前面提出的四个问题：我会哪些？我学了哪些？我能做什么？做这些我相对于别人有哪些优势？
我会哪些？我学了哪些？
Flash CS系列工具会吗？不会！
Flex会吗，会一点点而已。
还就只懂几个API和数据绑定和几个Flash基本类。其实这就够了。有基本类、有几个API，有数据绑定，组合起来就是非常强大的工具，我们不需要学习多少东西，却可以非常高效率的开发很多应用，且开发的这些应用可以分发到各大平台。不需要学习多少控件，有学习的时间，就够写一个自己的了。自己写的控件没有冗余，性能高，编译后的尺寸小，且修改方便。
我能做什么？
通常的，对特效要求不是特别高的Flash App都能做，这意味着，某些桌面软件，某些Web应用，某些ios应用和某些android应用。额，Html5也算顺便能做，今年顺手用haXe做了个html5的项目。
我相对于别人有哪些优势？
那些用Flash CS开发的，开发效率低，代码可维护性差。那些用Flex开发的，代码尺寸大，程序性能差。俺这样的优势就是Flex般的开发效率和灵活性，Flash般的性能和代码尺寸，且什么都是自己写的，出了问题自己也好弄，不像Flex那样是代码迷宫。
学的少，可做的多，相对别人还有优势，这是不是就是遁去的一呢？要是按照书本学，按照别人的建议学，东西学了一大堆，能做多少还是个问题，能以什么效率做也是个问题，更可怕的是，学完了还不知道自己学习的是什么。
只学一点点，不累！剩下的，交给狗爹度娘吧。
　　注：本文代码只有主要代码，那些不影响阅读的代码就没贴出来，不然太长了。又由于和业务代码在一个项目里，也不方便打包放出。见谅！</p>


            <style>
.PageNav {
  font-size: 14px;
  display: block;
  width: auto;
  overflow: hidden;
}

.PageNav a {
  display: block;
  width: 50%;
  float: left;
  margin: 1em 0;
}

.PageNav .next {
  text-align: right;
}    
</style>

<div style="margin-top:2em; padding:0 1.5em; border:1px solid #d3d3d3; background-color:#deebf7">
    <h3>版权声明</h3>
    <ul>
        <li>本文作者：<a href="" target="_blank">极客玩家大白</a></li>
        <li>本文链接：<a id='link' href="/just-learn-little.html" target="_blank">https://geekplayers.com/just-learn-little.html</a></li>
        <li>郑重声明：本文为博主原创或经授权转载的文章，欢迎转载，但<b>转载文章之后必须在文章页面明显位置注明出处</b>，否则保留追究法律责任的权利。如您有任何疑问或者授权方面的协商，请留言。</li>
    </ul>
</div>

<div class="PageNav">
    
    
    <a class="next" href="/smarty_usage_in_php.html"> PHP中Smarty引擎的常用语法&nbsp;<i class="fa fa-arrow-right"></i></a>
    
</div>

<div>
    <p align="center">
        
        <img src="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/assets/images/dotnet.jpg" width="300" height="300">
        
        <br />
        一个有故事的程序员
    </p>
    <p align="center" style="margin-top: 15px; font-size: 11px;color: #cc0000;">
        <strong>（转载本站文章请注明作者和出处 <a href="//geekplayers.com">极客玩家大白</a>）</strong>
    </p>
    <p align="center" style="margin-top: 15px; font-size: 16px;color: #337ab7;">
        <strong><a href="//geekplayers.com" target="_blank">点击了解 ：.NET技术人的网站</a></strong>
    </p>
</div>

<script>

    $(document).ready(function(){
        var hostname = window.location.hostname;

        var newUrl = "";
        // alert(window.location.href);
        if(hostname.indexOf('github.io') > -1)
        {
            newUrl = window.location.href.replace('geekplayers.com', 'yanglr.github.io');
            document.getElementById("link").innerText = newUrl;
        }

        $('.geopattern').each(function(){
            $(this).geopattern($(this).data('pattern-id'));
        });

    });
</script>

            <!-- Comments -->
            <div class="comment">
             

  
    <a href="#" class="show_disqus_comment" onclick="return false;">Show Disqus Comments</a>
    <div id="disqus_thread"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://geekplayers.com/just-learn-little.html';
        this.page.identifier = '/just-learn-little.html';
        this.page.title = '只学一点点：我的技术学习策略';
    };
    var disqus_loaded = false;
    $(function() {
        $('.show_disqus_comment').on('click', function() { // DON'T EDIT BELOW THIS LINE
            $(this).html('加载中...');
            var that = this;
            if (!disqus_loaded) {
                var d = document, s = d.createElement('script');

                s.type = 'text/javascript';
                s.async = true;
                var shortname = 'yanglr';

                s.src = '//' + shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);

                disqus_loaded = true;
            }
            $(that).remove();
        })
    })
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  

  
        <div id="gitalk-container"></div>
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/assets/css/gitalk.css"> <!-- 根据 cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css 微调 -->
        <script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
        <script>
        var title = location.pathname.substr(0, 50); //截取路径的前50个字符作为标识符          
        var gitalk = new Gitalk({
            id: title,
            clientID: '22eb6462c987e7a79860',
            clientSecret: '6cd15fa90d4e2f73fa16eaab9b3f783831fe3f3d',
            repo: 'geekplayers.com',
            owner: 'yanglr',
            admin: ['yanglr'],
            labels: ['gitalk'],
            perPage: 50
        })
        gitalk.render('gitalk-container');
        </script>
  


            </div>
        </div>

        <div class="col-md-3">
            <h3>Post Directory</h3>
<div id="post-directory-module">
<section class="post-directory">
    <!-- Links that trigger the jumping -->
    <!-- Added by javascript below -->
    <dl></dl>
</section>
</div>

<script type="text/javascript">

    $(document).ready(function(){
        $( "article h2" ).each(function( index ) {
            $(".post-directory dl").append("<dt><a class=\"jumper\" hre=#" +
                    $(this).attr("id")
                    + ">"
                    + $(this).text()
                    + "</a></dt>");

            var children = $(this).nextUntil("h2", "h3")

            children.each(function( index ) {
                $(".post-directory dl").append("<dd><a class=\"jumper\" hre=#" +
                        $(this).attr("id")
                        + ">"
                        + "&nbsp;&nbsp;- " + $(this).text()
                        + "</a></dd>");
            });
        });

        var fixmeTop = $('#post-directory-module').offset().top - 100;       // get initial position of the element

        $(window).scroll(function() {                  // assign scroll event listener

            var currentScroll = $(window).scrollTop(); // get current position

            if (currentScroll >= fixmeTop) {           // apply position: fixed if you
                $('#post-directory-module').css({      // scroll to that element or below it
                    top: '100px',
                    position: 'fixed',
                    width: 'inherit'
                });
            } else {                                   // apply position: static
                $('#post-directory-module').css({      // if you scroll above it
                    position: 'inherit',
                    width: 'inherit'
                });
            }

        });

        $("a.jumper").on("click", function( e ) {

            e.preventDefault();

            $("body, html").animate({
                scrollTop: ($( $(this).attr('hre') ).offset().top - 100)
            }, 600);

        });
    });

</script>
        </div>
        

    </div>

</article>

<script type="text/javascript">
    const headings = document.querySelectorAll('h2,h3,h4'); // 1
    const linkContent = '<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'; // 2
    for (const heading of headings) { // 3
        const linkIcon = document.createElement('a'); // 4
        
        if(heading.id != '')
        {
            linkIcon.setAttribute('href', `#${heading.id}`); // 5
            linkIcon.innerHTML = linkContent; // 6
            heading.firstChild.textContent = ' ' + heading.firstChild.textContent;
            heading.insertBefore(linkIcon, heading.firstChild);; // 7
        }
    }
</script>
        </div>

    
    <footer class="container">
        <div class="site-footer">
            <!--  <div class="site-footer-icons">
            <a target="_blank" href="https://www.zhihu.com/people/legege007">
               知乎
            </a>
            <a target="_blank" href="http://weibo.com/540071991">
               微博
            </a>
            <a target="_blank" href="https://github.com/yanglr">
                GitHub
            </a>
        </div> -->
            <div class="card text-center">
                <ul class="list-inline" style="margin-left: 0;">
                    <li>
                        <a target="_blank" href="https://github.com/yanglr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/legege007">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a target="_blank" href="https://weibo.com/540071991">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="site-footer-links mobile-hidden">
                
                <a href="/docker.html" title="Docker" target="_blank">Docker</a>
                
                <a href="/open-source.html" title="Code" target="_blank">Code</a>
                
                <a href="/geektime.html" title="极客" target="_blank">极客</a>
                
            </div>
            <!--         <div class="site-footer-icons">
                   沪ICP备20019934号-2
            </div> -->
            <div class="scrolltop">
                粤ICP备12009483号（Gitee站）
                <a href="javascript:window.scrollTo(0,0)">TOP↑</a>
            </div>
            <div class="rss">
                <a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a>
                Power by <a href="https://github.com/DONGChuan/Yummy-Jekyll">Yummy Jekyll</a>
            </div>
        </div>
        <!-- Third-Party JS -->
        <script type="text/javascript" src="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/bower_components/geopattern/js/geopattern.min.js"></script>
        <!-- My JS -->
        <script type="text/javascript" src="//cdn.jsdelivr.net/gh/yanglr/yanglr.github.io/assets/js/script.js"></script>
        

        <!-- Cnzz Analytics -->
        <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1279049771'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1279049771%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <!-- Cnzz Analytics -->
    </footer>


    </body>

</html>
